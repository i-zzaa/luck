import{r as p,R as Wt}from"./react.705ad3af.js";import{c as Kt}from"./react-dom.10879ce7.js";import{a as Qt}from"./axios.d349c3b3.js";import{h as we}from"./moment.9709ab41.js";import{j as e,a as u,F as pe,T as Zt,D as gt,M as Xt,C as es,I as ts,b as ss,c as os,L as ns,A as ve,d as be,e as Ke,f as vt,g as as,h as st,O as bt,N as yt,i as St,m as wt,K as rs,k as _e,z as is,l as Le}from"./primereact.95ddfdfc.js";import{B as Et,N as ls}from"./react-router-dom.096696d9.js";import{C as ne,u as ke}from"./react-hook-form.ad20ad1d.js";import{c as he}from"./clsx.09c75e33.js";import{L as cs}from"./react-lottie-player.6cdec72a.js";import{e as Nt,f as Je,d as Se,c as xe}from"./react-router.19ad69de.js";import{J as ds}from"./jodit-react.328ed469.js";import{E as It}from"./jspdf.71127e49.js";import{a as Re}from"./jspdf-autotable.bae232af.js";/* empty css                   */import"./core-js.fef2c0d7.js";import"./scheduler.2450001e.js";import"./form-data.d1f94bc2.js";import"./react-transition-group.66df557c.js";import"./@babel.4f1e7424.js";import"./dom-helpers.2a8a4335.js";import"./@remix-run.7ba39c5a.js";import"./lottie-web.df2e13c6.js";import"./fast-deep-equal.55bfef35.js";import"./rfdc.0929fce7.js";import"./fflate.0418c72f.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function a(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerpolicy&&(l.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?l.credentials="include":n.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(n){if(n.ep)return;n.ep=!0;const l=a(n);fetch(n.href,l)}})();we.locale("pt-br");const ps={TO:"#ef6c00",FONO:"#f6bf26",PSICO:"#8e24aa",PSICOPEDAG:"#000000"},us={TO:"#ffffff",FONO:"#ffffff",PSICO:"#ffffff",PSICOPEDAG:"#ffffff"},ms=()=>{setTimeout(()=>{(document.querySelectorAll(".p-multiselect-token")||[]).forEach(o=>{const a=ps[o.textContent.toUpperCase()],s=us[o.textContent.toUpperCase()];o.style.background=a,o.style.color=s})},0)},ot=t=>we(t).format("DD/MM/YYYY"),hs=t=>(we.locale("pt-br"),we(t).format("YYYY-MM-DD")),fs=t=>we(t).add(1,"days").format("YYYY-MM-DD"),nt=(t,o)=>{const a=we(t);return we(o).diff(a,"weeks")+1};var Ct=(t=>(t.mobile="DEVICE_MOBILE",t.web="DEVICE_WEB",t))(Ct||{});const Pe={id:"",name:"meta",type:"input-add",value:"",labelFor:"meta",subitems:[],buttonAdd:!0,customCol:"col-span-5 sm:col-span-5",labelText:"Meta"},ze={id:"",name:"item",type:"input-add",value:"",labelFor:"item",buttonAdd:!0,customCol:"col-span-5 sm:col-span-5",labelText:"Item"},fe=Qt.create({baseURL:"http://localhost:3000",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json",device:Ct.mobile}}),at=(t,o,a)=>{fe.interceptors.request.use(async s=>(s.url.endsWith("login")||(s.headers.Authorization=`Bearer ${t}`,s.headers.login=o,s.headers.idUser=a),s),s=>Promise.reject(s))},ue=async(t,o)=>{var n;const a=o?`?${o}`:"",s=await fe(`${t}/dropdown${a}`);return s.status===200?((n=s.data)==null?void 0:n.data)||s.data:[]},Fe=async(t,o)=>await fe.post(t,o),Be=async(t,o)=>await fe.put(t,o),xs=async t=>await fe.delete(`${t}`),Ee=async t=>{const o=await fe(t);return o.status===200?o.data:[]},ye=async(t,o,a)=>{const s=a?`?${a}`:"";return await fe.post(`${t}/filtro${s}`,o)},gs="developer",At=p.exports.createContext({}),vs=({children:t})=>{const{perfil:o}=je(),[a,s]=p.exports.useState([]),n=r=>{s(r)};p.exports.useMemo(async()=>{const r=sessionStorage.getItem("auth"),d=(r?JSON.parse(r):[]).permissoes||await Ee("permissao");s(d)},[]),p.exports.useEffect(()=>{a.length},[]);const l=(r="")=>{switch(!0){case!o:throw new Error("Voce n\xE3o tem permissao");case r==="*":return!0;default:return!!(a.length&&a.includes(r.toUpperCase())||o===gs)}};return e(At.Provider,{value:{hasPermition:l,perfil:o,permissions:a,setPermissionsLogin:n},children:t})},$e=()=>p.exports.useContext(At),bs="absolute animate-bounce min-w-[24rem] top-2 right-0 block flex p-4 mb-4 text-sm rounded-lg items-center gap-2 z-[70] ",Pt=p.exports.createContext({}),ys=({children:t})=>{const[o,a]=p.exports.useState("hidden"),[s,n]=p.exports.useState(),[l,r]=p.exports.useState(""),[i,d]=p.exports.useState({type:"info",title:"",message:"",open:!1}),y=g=>{switch(g){case"success":n(e("i",{className:"pi pi-check-circle"}));break;case"failure":n(e("i",{className:"pi pi-times-circle"}));break;case"warning":n(e("i",{className:"pi pi-exclamation-circle"}));break;case"info":n(e("i",{className:"pi pi-info-circle"}));break;default:n(e("i",{className:"pi pi-undo"}));break}},f=g=>{switch(g){case"success":r("z-[10000] text-white bg-green-400 rounded-lg  w-24 ");break;case"failure":r("z-[10000] text-white bg-red-400 rounded-lg  w-24");break;case"warning":r("z-[10000] text-white bg-yellow-400 rounded-lg  w-24");break;case"info":r("z-[10000] text-white bg-gray-400 rounded-lg  w-24");break;default:r("z-[10000] text-white bg-gray-400 rounded-lg  w-24");break}},N=({type:g,message:h,title:I,open:w})=>{y(g),f(g),d({type:g,message:h,title:I,open:w}),a(w?"block":"hidden"),setTimeout(()=>{a("hidden")},3e3)};return e(Pt.Provider,{value:{renderToast:N},children:u(pe,{children:[t,u("div",{className:`${bs} ${o} ${l}`,role:"alert",children:[s,u("span",{children:[e("span",{className:"font-medium",children:"   "+i.title})," "+i.message]})]})]})})};function ce(){return p.exports.useContext(Pt)}const Ss=async()=>{"caches"in window&&(await caches.keys()).forEach(async o=>{await caches.delete(o)}),localStorage.clear(),sessionStorage.clear()};window.addEventListener("unload",()=>{localStorage.clear(),sessionStorage.clear(),"caches"in window&&caches.keys().then(t=>{t.forEach(o=>caches.delete(o))})});const Me=p.exports.createContext({}),ws=({children:t})=>{const[o,a]=p.exports.useState(),[s,n]=p.exports.useState(""),{setPermissionsLogin:l}=$e(),{renderToast:r}=ce();p.exports.useEffect(()=>{const f=sessionStorage.getItem("token"),N=sessionStorage.getItem("auth"),g=sessionStorage.getItem("perfil")||"";if(f&&N){const h=JSON.parse(N);a(h),n(g),at(f,h.login,h.id)}},[]);const i=async f=>{var N;try{const h=(await fe.post("/login",{...f,password:parseInt(f.password)})).data;setTimeout(()=>{y()},8e6);const I=(h==null?void 0:h.user)||h.data,w=(h==null?void 0:h.accessToken)||h.data.accessToken,S=(N=I.perfil)!=null&&N.nome?I.perfil.nome.toLowerCase():I.perfil.toLowerCase();sessionStorage.setItem("token",w),sessionStorage.setItem("auth",JSON.stringify(I)),sessionStorage.setItem("perfil",S),I.permissoes.length&&l&&l(I.permissoes),n(S),a(I),await at(w,I.login,I.id),r({type:"success",title:" ",message:"Bem vindo!",open:!0})}catch(g){d(g)}},d=f=>{const N=f!=null&&f.data?f==null?void 0:f.data.message:"Usu\xE1rio n\xE3o encontrado!";r({type:"failure",title:f.status||"Erro no Login!",message:N,open:!0})},y=async()=>{Ss(),a(void 0);try{await fe.get("/logout")}catch(f){console.log(f)}};return e(Me.Provider,{value:{signed:Boolean(o),user:o,Login:i,Logout:y,perfil:s},children:t})},je=()=>p.exports.useContext(Me);function Es(t="primary",o="white",a="full"){const s={primary:"bg-violet-800 hover:bg-violet-600",second:"bg-yellow-400 hover:bg-violet-800",transparent:"bg-transparent hover:bg-transparent"},n={white:"text-white",red:"text-red-400 hover:text-violet-800 focus:text-violet-600",green:"text-green-400 hover:text-violet-800 focus:text-violet-600",yellow:"text-yellow-400 hover:text-violet-800 focus:text-violet-600",violet:"text-violet-800 hover:text-violet-600 focus:text-violet-600"},l={full:"w-full",sm:"",icon:"",link:"",md:"sm:w-2/5 w-full"};return he("text-sm rounded-md border-none",s[t],n[o],l[a])}function W({icon:t,size:o="full",type:a="primary",color:s="white",text:n,loading:l,disabled:r=!1,onClick:i,typeButton:d="submit"}){const y=o==="icon",f=Es(a,s,o);return e(Zt,{icon:t,type:d,label:y?"":n,loading:l,disabled:r,onClick:i,className:f})}function Ns({id:t,labelText:o,type:a,errors:s,customCol:n,hidden:l,children:r}){return u("div",{className:he("label-float",{"my-5":!n,hidden:l&&l},n),children:[r,a!=="switch"&&a!=="checkbox"&&e("label",{children:o}),(s==null?void 0:s[t])&&e("p",{className:"text-xs text-red-400 text-end",children:s[t].message})]})}function Is({id:t,value:o,className:a,disabled:s,validate:n,control:l,onChange:r}){return e(ne,{name:t,control:l,rules:n,render:({field:i})=>e("textarea",{...i,id:i.id,value:o||i.value,className:a,disabled:s,rows:8,onChange:d=>{i.onChange(d.target.value),r==null||r(d.target.value)}})})}function Cs({id:t,value:o,options:a,disabled:s,validate:n,control:l,onChange:r}){return e(ne,{name:t,control:l,rules:n,render:({field:i})=>e(gt,{value:o||i.value,virtualScrollerOptions:{itemSize:38},options:a,onChange:d=>{r==null||r(d.value),i.onChange(d.value)},optionLabel:"nome",filter:!0,showClear:!0,filterBy:"nome",disabled:s})})}function As({id:t,value:o,options:a,disabled:s,validate:n,control:l,onChange:r}){return e(ne,{name:t,control:l,rules:n,render:({field:i})=>e(Xt,{disabled:s,id:i.id,display:"chip",optionLabel:"nome",filter:!0,value:o||i.value,onChange:d=>{ms(),r==null||r(d.value),i.onChange(d.value)},options:a})})}function Ps({id:t,value:o,disabled:a,validate:s,control:n,onChange:l,onClick:r,buttonAdd:i}){return u("div",{className:"grid gap-2 grid-cols-6",children:[e(ne,{name:t,control:n,rules:s,render:({field:d})=>e("textarea",{...d,id:d.id,value:o||d.value,className:"inputAnimado col-span-5",autoComplete:"off",disabled:a,rows:2,onInput:y=>{d.onChange(y),l==null||l(y)}})}),i?e(W,{text:"Add",icon:"pi pi-plus",type:"primary",size:"icon",onClick:()=>r==null?void 0:r("add")}):!a&&e(W,{text:"Remove",icon:"pi pi-trash",type:"transparent",color:"red",size:"icon",onClick:()=>r==null?void 0:r("remove")})]})}function ks({id:t,value:o,className:a,disabled:s,validate:n,control:l,onChange:r,labelText:i}){return e(ne,{name:t,control:l,rules:n,render:({field:d})=>u("div",{className:"flex items-center gap-2",children:[e(es,{checked:o||d.value,onChange:y=>{d.onChange(y.target.checked),r==null||r(y.target.checked)},disabled:s,className:a}),e("span",{className:"text-violet-800",children:i})]})})}function Fs({id:t,value:o,disabled:a,validate:s,control:n,onChange:l,labelText:r}){return e(ne,{name:t,control:n,rules:s,render:({field:i})=>u("div",{className:"grid grid-cols-6 justify-start items-center h-8",children:[e("span",{className:"col-span-4 text-violet-800",children:r}),e("div",{className:"col-span-2",children:e(ts,{checked:o||i.value,onChange:d=>{i.onChange(d.value),l==null||l(d.value)},disabled:a})})]})})}function Ds({id:t,value:o,className:a,disabled:s,validate:n,control:l,onChange:r}){return e(ne,{name:t,control:l,rules:n,render:({field:i})=>e(ss,{value:o||i.value,type:"tel",className:`inputAnimado font-inter font-light ${a}`,mask:"(99) 9999-9999",disabled:s,onChange:d=>{i.onChange(d.value),r==null||r(d.value)}},i.id)})}function Os({id:t,value:o,disabled:a,validate:s,control:n,onChange:l}){return e(ne,{name:t,control:n,rules:s,render:({field:r})=>e("div",{className:"inputAnimado font-inter",id:r.id,children:u("div",{className:"p-inputgroup",children:[e(os,{value:o||r.value,disabled:a,onInput:i=>{r.onChange(i),l==null||l(i)}}),e("span",{className:"p-inputgroup-addon",children:"R$"})]})})})}function Ls({id:t,value:o,disabled:a,validate:s,control:n,onChange:l}){return e(ne,{name:t,control:n,rules:s,render:({field:r})=>e("input",{...r,id:r.id,value:o||r.value,type:"date",className:"inputAnimado",autoComplete:"off",min:s==null?void 0:s.min,disabled:a,onInput:i=>{r.onChange(i),l==null||l(i)}})})}function Rs({id:t,value:o,disabled:a,validate:s,control:n,onChange:l,className:r}){return e(ne,{name:t,control:n,rules:s,render:({field:i})=>e("input",{...i,id:i.id,value:o||i.value,type:"time",className:`inputAnimado font-inter ${r}`,disabled:a,onInput:d=>{i.onChange(d),l==null||l(d)}})})}function rt({id:t,value:o,disabled:a,validate:s,control:n,onChange:l,className:r}){return e(ne,{name:t,control:n,rules:s,render:({field:i})=>e("input",{...i,id:i.id,value:o||i.value,type:"text",className:`inputAnimado ${r}`,autoComplete:"off",disabled:a,onInput:d=>{i.onChange(d),l==null||l(d)}})})}function Ts({id:t,value:o,options:a,disabled:s,validate:n,control:l,onChange:r,onClick:i,buttonAdd:d}){return u("div",{className:"grid gap-2 grid-cols-6",children:[e(ne,{name:t,control:l,rules:n,render:({field:y})=>e(gt,{className:"col-span-5",value:o||y.value,virtualScrollerOptions:{itemSize:38},options:a,onChange:f=>{r==null||r(f.value),y.onChange(f.value)},optionLabel:"nome",filter:!0,showClear:!0,filterBy:"nome",disabled:s})}),d?e(W,{text:"Add",icon:"pi pi-plus",type:"primary",size:"icon",onClick:()=>i==null?void 0:i("add"),typeButton:"button",disabled:s}):!s&&e(W,{text:"Remove",icon:"pi pi-trash",type:"transparent",color:"red",size:"icon",onClick:()=>i==null?void 0:i("remove"),typeButton:"button"})]})}function zs({id:t,value:o,disabled:a,validate:s,control:n,onChange:l,className:r}){return e(ne,{name:t,control:n,rules:s,render:({field:i})=>e("input",{...i,id:i.id,value:o||i.value,type:"password",className:`inputAnimado ${r}`,autoComplete:"off",disabled:a,onInput:d=>{i.onChange(d),l==null||l(d)}})})}function Ms({id:t,options:o,validate:a,control:s}){return e(ne,{name:t,control:s,rules:a,render:({field:n})=>e(ns,{value:n.value,options:o,onChange:l=>n.onChange(l.value),multiple:!0,filter:!0,optionLabel:"nome",listStyle:{maxHeight:"300px"}})})}function me(t){const{type:o}=t;return e(Ns,{...t,children:(()=>{switch(o){case"list":return e(Ms,{...t});case"textarea":return e(Is,{...t});case"select":return e(Cs,{...t});case"multiselect":return e(As,{...t});case"input-add":return e(Ps,{...t});case"checkbox":return e(ks,{...t});case"switch":return e(Fs,{...t});case"tel":return e(Ds,{...t});case"price":return e(Os,{...t});case"date":return e(Ls,{...t});case"time":return e(Rs,{...t});case"text":return e(rt,{...t});case"select-add":return e(Ts,{...t});case"password":return e(zs,{...t});default:return e(rt,{...t})}})()})}const it={xs:"text-xs",sm:"text-sm",md:"text-md",lg:"text-lg"},lt={white:"text-white","gray-light":"text-gray-300",gray:"text-gray-400","gray-dark":"text-gray-800",violet:"text-violet-800",yellow:"text-yellow-400",black:"text-black"};function kt({size:t="md",color:o="gray-dark",children:a}){const s=it[t]||it.md,n=lt[o]||lt["gray-dark"];return e("span",{className:he("font-bold",s,n),children:a})}const ct={xs:"text-xs",sm:"text-sm",md:"text-md",lg:"text-lg"},dt={white:"text-white","gray-light":"text-gray-300",gray:"text-gray-400","gray-dark":"text-gray-800",violet:"text-violet-800",yellow:"text-yellow-400",red:"text-red-900",black:"text-black"};function Bs({size:t="md",color:o="gray-dark",text:a,display:s="grid",subtext:n,icon:l,className:r}){const i=ct[t]||ct.md,d=dt[o]||dt["gray-dark"];return u("div",{className:he("flex gap-4 font-normal tracking-wider text-start items-center text-ellipsis overflow-hidden whitespace-nowrap",i,d,r),children:[l&&e("div",{className:"flex items-center",children:e("i",{className:l})}),u("span",{className:s,children:[a,"\xA0",e("strong",{className:"font-inter",children:n})]})]})}function $s(t="DEFAULT"){const o={TO:"rounded-lg cursor-pointer hover:scale-[101%] duration-700 ease-in-out border-l-4 border-to",FONO:"rounded-lg cursor-pointer hover:scale-[101%] duration-700 ease-in-out border-l-4 border-fono",PSICO:"rounded-lg cursor-pointer hover:scale-[101%] duration-700 ease-in-out border-l-4 border-psico",PSICOPEDAG:"rounded-lg cursor-pointer hover:scale-[101%] duration-700 ease-in-out border-l-4 border-psicopedag",MOTRICIDADE:"rounded-lg cursor-pointer hover:scale-[101%] duration-700 ease-in-out border-l-4 border-motricidade",MUSICOTERAPIA:"rounded-lg cursor-pointer hover:scale-[101%] duration-700 ease-in-out border-l-4 border-musicoterapia",DEFAULT:"rounded-lg",FREE:"border-l-4 border-l-green-400 rounded-lg cursor-not-allowed"};return o[t.toUpperCase()]||o.DEFAULT}function re({children:t,type:o="DEFAULT",className:a,onClick:s}){const n=$s(o.toLocaleUpperCase()),l=he("px-2 bg-white shadow-sm mt-2",n,a);return e("fieldset",{className:l,onClick:s,children:e("div",{className:"py-4 w-full",children:t})})}function Qe({id:t,legend:o,fields:a,screen:s,loading:n,nameButton:l,dropdown:r,onSubmit:i,onInclude:d,onReset:y,defaultValues:f}){const{setValue:N,handleSubmit:g,control:h,reset:I}=ke({defaultValues:f}),{hasPermition:w}=$e(),S=()=>{I(),y()},H=T=>{i(T)};return p.exports.useEffect(()=>{w(`${s}_FILTRO_SELECT_AGENDADOS`)||N("naFila",!0)}),e(ve,{children:e(be,{header:o,tabIndex:0,children:u("form",{id:t,action:"#",onSubmit:g(H),className:"flex-1",children:[e("div",{className:"grid grid-cols-6 gap-4",children:a.map(T=>w(T.permission)&&e(me,{labelText:T.labelText,id:T.id,type:T.type,customCol:T.customCol,control:h,options:T.type==="select"?r[T.name]:void 0},T.id))}),e("div",{className:"flex items-center mt-10 gap-2 justify-between",children:u(pe,{children:[d&&w(`${s}_FILTRO_BOTAO_CADASTRAR`)&&e("div",{className:"sm:text-end",children:e(W,{text:l||"Cadastrar",icon:"pi pi-plus",type:"primary",size:"sm",onClick:d})}),e("div",{className:"hidden sm:w-2/4 ml-auto sm:grid grid-cols-2 gap-2",children:u(pe,{children:[w(`${s}_FILTRO_BOTAO_LIMPAR`)&&e("div",{className:"text-end",children:e(W,{text:"Limpar",icon:"pi pi-filter-slash",type:"second",size:"full",onClick:S})}),w(`${s}_FILTRO_BOTAO_PESQUISAR`)&&e("div",{className:"text-end",children:e(W,{text:"Pesquisar",icon:"pi pi-filter",type:"primary",size:"full",loading:n,onClick:()=>g(H)})})]})}),e("div",{className:"sm:w-2/4 ml-auto grid sm:hidden grid-cols-2 gap-2",children:u(pe,{children:[w(`${s}_FILTRO_BOTAO_LIMPAR`)&&e("div",{className:"text-end",children:e(W,{text:"Limpar",icon:"pi pi-filter-slash",type:"second",size:"icon",onClick:S})}),w(`${s}_FILTRO_BOTAO_PESQUISAR`)&&e("div",{className:"text-end",children:e(W,{text:"Pesquisar",icon:"pi pi-filter",type:"primary",size:"icon",loading:n,onClick:()=>g(H)})})]})})]})})]})})})}function De(){return u("div",{className:"uppercase flex items-center gap-4 m-auto mt-2 justify-center",children:[e("i",{className:"pi pi-folder-open"}),e(kt,{color:"gray",children:"N\xE3o h\xE1 itens"})]})}const Ft="Comp 1",Dt="",Ot=[{ty:4,nm:"circle outline",mn:"",sr:1,st:0,op:180,ip:0,hd:!1,cl:"",ln:"",ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[0,0,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"sh",bm:0,cl:"",ln:"",hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,55.228],[55.228,0],[0,-55.228],[-55.228,0]],o:[[0,-55.228],[-55.228,0],[0,55.228],[55.228,0]],v:[[0,0],[-100,-100],[-200,0],[-100,100]]},ix:2}},{ty:"sh",bm:0,cl:"",ln:"",hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 2",ix:2,d:1,ks:{a:0,k:{c:!0,i:[[0,55.228],[-55.228,0],[0,-55.228],[55.228,0]],o:[[0,-55.228],[55.228,0],[0,55.228],[-55.228,0]],v:[[0,0],[100,-100],[200,0],[100,100]]},ix:2}},{ty:"tm",bm:0,cl:"",ln:"",hd:!1,mn:"ADBE Vector Filter - Trim",nm:"Trim Paths 1",ix:3,e:{a:0,k:80,ix:2},o:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0],t:0},{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[360],t:60}],ix:3},s:{a:0,k:100,ix:1},m:2},{ty:"st",bm:0,cl:"",ln:"",hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:2,lj:1,ml:4,o:{a:0,k:100,ix:4},w:{a:0,k:52,ix:5},d:[],c:{a:0,k:[.4,.1608,.4667],ix:3}}],ind:1,parent:2},{ty:4,nm:"circle",mn:"",sr:1,st:0,op:200,ip:0,hd:!1,cl:"",ln:"",ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[960,540,0],ix:2},r:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0],t:0},{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[360],t:60}],ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"el",bm:0,cl:"",ln:"",hd:!1,mn:"ADBE Vector Shape - Ellipse",nm:"Ellipse Path 1",d:1,p:{a:0,k:[-100,0],ix:3},s:{a:0,k:[100,100],ix:2}},{ty:"el",bm:0,cl:"",ln:"",hd:!1,mn:"ADBE Vector Shape - Ellipse",nm:"Ellipse Path 2",d:1,p:{a:0,k:[100,0],ix:3},s:{a:0,k:[100,100],ix:2}},{ty:"fl",bm:0,cl:"",ln:"",hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.4,.1608,.4667],ix:4},r:1,o:{a:0,k:100,ix:5}}],ind:2}],Lt=0,Rt=1080,Tt=1920,zt={a:"",k:"",d:"",g:"@lottiefiles/toolkit-js 0.22.1",tc:"#000000"},Mt="5.7.4",Bt=30,$t=180,jt=0,_t=[],js={nm:Ft,mn:Dt,layers:Ot,ddd:Lt,h:Rt,w:Tt,meta:zt,v:Mt,fr:Bt,op:$t,ip:jt,assets:_t},_s=Object.freeze(Object.defineProperty({__proto__:null,nm:Ft,mn:Dt,layers:Ot,ddd:Lt,h:Rt,w:Tt,meta:zt,v:Mt,fr:Bt,op:$t,ip:jt,assets:_t,default:js},Symbol.toStringTag,{value:"Module"}));function Ze(){return e("div",{className:"flex items-center justify-center",children:e(cs,{loop:!0,animationData:_s,play:!0,style:{width:200,height:200}})})}const Vs=[{labelText:"Login",labelFor:"username",id:"username",name:"username",type:"text",autoComplete:"text",isRequired:!0,placeholder:"Login",validate:{pattern:{value:/^([a-z]{3,})+\.([a-z]{3,})$/i,message:"formato padr\xE3o xxx.xxx"},required:"Campo obrigat\xF3rio!",minlength:8}},{labelText:"Senha",labelFor:"password",id:"password",name:"password",type:"password",isRequired:!0,placeholder:"Senha",validate:{required:"Campo obrigat\xF3rio!"}}],Vt=[{permission:"PEI_FILTRO_BOTAO_CADASTRAR",labelText:"Paciente",id:"pacienteId",name:"paciente",type:"select",singleSelect:!0,customCol:"col-span-6 sm:col-span-6"},{permission:"PEI_FILTRO_SELECT_PROTOCOLO",labelText:"Protocolo",id:"protocoloId",name:"protocolo",type:"select",singleSelect:!0,customCol:"col-span-6 sm:col-span-6"}],Hs=[{permission:"PEI_FILTRO_BOTAO_CADASTRAR",labelText:"Procedimento de Ensino",id:"procedimentoEnsinoId",name:"procedimentoEnsino",type:"select",singleSelect:!1,customCol:"col-span-6 sm:col-span-6"},{permission:"PEI_FILTRO_BOTAO_CADASTRAR",labelText:"Programa",id:"programaId",name:"programa",type:"select",singleSelect:!0,customCol:"col-span-6 sm:col-span-6"},{permission:"PEI_FILTRO_BOTAO_CADASTRAR",labelText:"Est\xEDmulo Discriminativo",id:"estimuloDiscriminativo",name:"estimuloDiscriminativo",type:"text",customCol:"col-span-6 sm:col-span-6"},{permission:"PEI_FILTRO_BOTAO_CADASTRAR",labelText:"Resposta",id:"resposta",name:"resposta",type:"text",customCol:"col-span-6 sm:col-span-6"},{permission:"PEI_FILTRO_BOTAO_CADASTRAR",labelText:"Est\xEDmulo Refor\xE7ador Positivo",id:"estimuloReforcadorPositivo",name:"estimuloReforcadorPositivo",type:"text",customCol:"col-span-6 sm:col-span-6"}],Js=[{permission:"PEI_FILTRO_BOTAO_CADASTRAR",labelText:"Paciente",id:"pacienteId",name:"paciente",type:"select",singleSelect:!0,customCol:"col-span-6 sm:col-span-6"},{permission:"PEI_FILTRO_BOTAO_CADASTRAR",labelText:"Protocolo",id:"protocoloId",name:"protocolo",type:"select",singleSelect:!0,customCol:"col-span-6 sm:col-span-6"}];function Ys(){const t={username:"cristiane.graff",password:"12345678"},[o,a]=p.exports.useState(!1),[s,n]=p.exports.useState(!1),{renderToast:l}=ce(),{Login:r}=je(),{handleSubmit:i,formState:{errors:d},setValue:y,watch:f,control:N}=ke({defaultValues:t}),g=async({username:I,password:w})=>{n(!0);try{await r({username:I,password:w})}catch{l({type:"failure",title:"Erro!",message:"Falha na conex\xE3o",open:!0})}finally{n(!1)}},h=I=>{a(I),localStorage.setItem("rememberCheck",JSON.stringify(I)),I?localStorage.setItem("rememberLogin",JSON.stringify({username:f("username"),password:f("password")})):localStorage.removeItem("rememberLogin")};return p.exports.useEffect(()=>{const I=localStorage.getItem("rememberLogin");if(I){const{username:w,password:S}=JSON.parse(I);a(!0),y("username",w),y("password",S)}},[]),u("form",{className:"mt-8 space-y-6",onSubmit:i(g),children:[e("div",{children:Vs.map(I=>e(me,{id:I.id,type:I.type,labelText:I.labelText,control:N,validate:I.validate,errors:d},I.id))}),e(me,{id:"checkbox-login",labelText:"Lembrar login",type:"checkbox",control:N,onChange:h,value:o}),e(W,{text:"Entrar",type:"primary",size:"full",onClick:i(g),loading:s})]})}const Gs="luck-web",qs="0.8.1",Us="module",Ws={dev:"vite --port=3002 --host",start:"node serve.js --host",preview:"vite preview --host",sb:"start-storybook -p 6006",format:'prettier --write "src/**/*.{ts,js,tsx}"',lint:'eslint "src/**/*.{ts,js}" --quiet',build:"export NODE_OPTIONS='--max-old-space-size=8192' && tsc && vite build"},Ks={"@fullcalendar/core":"5.11.3","@fullcalendar/daygrid":"5.11.3","@fullcalendar/interaction":"5.11.3","@fullcalendar/list":"5.11.3","@fullcalendar/moment":"5.11.3","@fullcalendar/moment-timezone":"5.11.3","@fullcalendar/react":"5.11.2","@fullcalendar/rrule":"5.11.3","@fullcalendar/timegrid":"5.11.3","@types/uuid":"^9.0.7","@vitejs/plugin-react-refresh":"^1.3.6",autoprefixer:"10.4.12",axios:"1.1.3","chart.js":"3.9.1",clsx:"1.2.1",cors:"2.8.5",express:"4.18.2","jodit-react":"^4.1.2",jspdf:"^2.5.2","jspdf-autotable":"^3.8.4","lottie-react":"2.3.1",moment:"2.29.4","postcss-import":"15.0.0",primeicons:"6.0.1",primereact:"8.7.0",quill:"1.3.7",react:"18.2.0","react-chartjs-2":"4.3.1","react-dom":"18.2.0","react-hook-form":"7.37.0","react-lottie-player":"1.5.4","react-router-dom":"6.4.2",rrule:"2.7.1",url:"0.11.0",uuid:"^9.0.1","vite-plugin-pwa":"^0.17.4","web-vitals":"2.1.4","workbox-background-sync":"6.5.4","workbox-broadcast-update":"6.5.4","workbox-cacheable-response":"6.5.4","workbox-core":"6.5.4","workbox-expiration":"6.5.4","workbox-google-analytics":"6.5.4","workbox-navigation-preload":"6.5.4","workbox-precaching":"6.5.4","workbox-range-requests":"6.5.4","workbox-routing":"6.5.4","workbox-strategies":"6.5.4","workbox-streams":"6.5.4",xlsx:"^0.18.5"},Qs={"@babel/core":"7.19.3","@types/react":"18.0.17","@types/react-dom":"18.0.6","@vitejs/plugin-react":"2.1.0","babel-loader":"8.2.5",prettier:"latest","standard-version":"9.5.0",tailwindcss:"3.2.1",typescript:"4.8.4",vite:"3.1.0","workbox-build":"6.5.4"},Zs={name:Gs,version:qs,private:!0,type:Us,scripts:Ws,dependencies:Ks,devDependencies:Qs},Xe="/assets/logo-lg.ee70d40f.jpg";function Xs({heading:t}){return u("div",{className:"mb-10 text-center",children:[e("div",{className:"flex justify-center",children:e("img",{alt:"",className:"h-32 ",src:Xe})}),e(kt,{size:"lg",children:t})]})}function pt(){const[t,o]=p.exports.useState(""),a=p.exports.useCallback(async()=>{const{data:s}=await Ee("/");o(`vers\xE3o frontend: ${Zs.version} - ${s}`)},[]);return p.exports.useEffect(()=>{a()},[a]),u(pe,{children:[e(Xs,{heading:"Prontu\xE1rio"}),e(Ys,{}),e("div",{className:"text-xs absolute bottom-0 text-gray-300 left-0  w-full flex justify-center",children:e("div",{className:"",children:t})})]})}const eo=()=>e("div",{className:"min-h-full h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e("div",{className:"max-w-md w-full space-y-8",children:e(Et,{children:u(Nt,{children:[e(Je,{path:"/",element:e(pt,{})}),e(Je,{path:"*",element:e(pt,{})})]})})})}),to=({children:t})=>e("div",{className:"h-screen overflow-y-auto",children:e("div",{className:"mx-2 mt-4 mb-16",children:t})}),Ht=p.exports.createContext({}),so=({children:t})=>{const[o,a]=p.exports.useState(!1);return e(Ht.Provider,{value:{open:o,setOpen:a},children:t})},oo=t=>t.split("-").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" ");function no({route:t}){const a=Se().pathname.startsWith(t.path);return e("li",{className:he("hover:px-0 hover:bg-primary-hover hover:text-primary-text-hover duration-700 grid justify-center",a?"bg-primary-hover text-primary-text-hover":"text-primary-text"),children:u(ls,{to:t.path,className:"grid grid-cols-2 gap-8 items-center text-sm px-4 py-4 cursor-pointer",children:[e("i",{className:he("text-end",t.icon)}),e("span",{className:"duration-700",children:oo(t.path)})]})},t.path)}function ao(){const[t,o]=p.exports.useState([]);return p.exports.useEffect(()=>{const a=Ut.filter(s=>s.path!=="*"&&s.menu);o(a)},[]),t}const ro=()=>{const t=xe(),{Logout:o}=p.exports.useContext(Me),{user:a,perfil:s}=p.exports.useContext(Me),{open:n,setOpen:l}=p.exports.useContext(Ht),r=ao();return n?(()=>u("aside",{onClick:()=>l(!1),className:"fixed border-box shadow-3xl w-full h-screen z-20 bg-primary duration-700 ease-in-out justify-center",children:[e("div",{className:"bg-logo-md-write bg-no-repeat bg-cover h-[13rem] w-[20rem] mx-auto"}),u("div",{className:"border-y border-primary-text duration-1000 p-4 mt-2",children:[e("h3",{className:"text-primary-text text-center font-light text-sm",children:a.nome}),e("h3",{className:"text-gray-200 text-center font-light text-xs",children:s})]}),e("ul",{className:"list-none p-0 mt-8",children:r.map(y=>e(no,{route:y},y.path))}),e("i",{onClick:o,className:"pi pi-sign-out duration-700 text-primary-text hover:scale-125 cursor-pointer w-4 col-span-1 fixed bottom-8 left-[50%]"})]}))():e("nav",{className:"fixed h-12 w-full bg-primary mb-8",children:(()=>e("aside",{className:"fixed w-full right-2 shadow-3xl h-12 z-20 bg-primary duration-700 ease-in-out cursor-pointer",children:u("div",{className:"flex justify-between items-center",children:[e("div",{className:"sm:text-end ml-2",children:e(W,{text:"",icon:"pi pi-arrow-left",type:"primary",color:"white",size:"icon",onClick:()=>t(-1)})}),e("div",{className:"w-12 h-12 mt-[1vh] rounded-3xl bg-primary",onClick:()=>l(!0),children:e("div",{className:"bg-logo-mini bg-no-repeat bg-cover h-12 w-12 duration-700"})})]})}))()})};function ut(){const[t,o]=p.exports.useState(),[a,s]=p.exports.useState(!1),{renderToast:n}=ce(),{reset:l,handleSubmit:r,formState:{errors:i},control:d}=ke(),y=()=>{const N=sessionStorage.getItem("auth"),g=JSON.parse(N);o(g)},f=async N=>{s(!0);try{N.id=t.login;const{data:g}=await Be("/usuarios/reset-senha",N);s(!1),l(),n({type:"success",title:"",message:g.message,open:!0})}catch({message:g}){n({type:"failure",title:"401",message:`${g}`,open:!0}),l();return}};return p.exports.useEffect(()=>{y()},[]),e(pe,{children:e(re,{className:"rounded-lg border border-gray-200 p-4",children:u("div",{className:"grid sm:grid-cols-2",children:[e(Bs,{text:t==null?void 0:t.nome,subtext:t==null?void 0:t.login,color:"violet",size:"md",icon:"pi pi-id-card",display:"grid"}),u("div",{className:"flex gap-2  my-6 sm:my-0  items-center",children:[e(me,{labelText:"Alterar senha",id:"senha",type:"password",customCol:" w-full",errors:i,validate:{required:!0},control:d}),e("div",{className:" mt-4 ",children:e(W,{text:"Alterar senha",type:"second",icon:"pi pi-sync",size:"icon",onClick:r(f)})})]})]})})})}var Ye=(t=>(t.atendido="Atendido",t.atestado="Atestado",t.livre="Livre",t.confirmado="Confirmado",t))(Ye||{});const io=[{permission:"AGENDA_CALENDARIO_FILTRO_BOTAO_PESQUISAR",labelText:"Data Inicial",id:"dataInicio",name:"dataInicio",customCol:"col-span-6 sm:col-span-3",type:"date"},{permission:"AGENDA_CALENDARIO_FILTRO_BOTAO_PESQUISAR",labelText:"Data Final",id:"datatFim",name:"datatFim",customCol:"col-span-6 sm:col-span-3",type:"date"}];function lo(t,o,a,s){if(!(t==="Avalia\xE7\xE3o")||!(o&&a&&s))return t;const r=nt(o,s),i=nt(o,a);return`${t} ${r}/${i}`}const co=({title:t,status:o,localidade:a,isExterno:s,km:n,modalidadeInfo:l})=>u("div",{className:"text-gray-800 text-sm text-center grid justify-center",children:[e("div",{className:"font-base font-semibold text-primary",children:t}),u("p",{className:"flex gap-4 items-center justify-between",children:[e("span",{children:l}),e("span",{children:o})]}),u("p",{className:"flex gap-4 items-center",children:[a,s&&e("span",{className:"font-bold font-inter",children:`- ${n}km`})]})]}),et=({start:t,end:o,title:a,statusEventos:s,localidade:n,isExterno:l,km:r,modalidade:i,dataInicio:d,dataFim:y,dataAtual:f})=>{const N=lo(i,d,y,f);return u("div",{className:"flex gap-2 w-full items-center",children:[u("div",{className:"grid text-center font-inter text-sm text-gray-400",children:[e("span",{children:t})," - ",e("span",{children:o})]}),e(co,{title:a,status:s,localidade:n,isExterno:l,km:r,modalidadeInfo:N})]})},Jt=io,po={};Jt.forEach(t=>po[t.id]="");const uo=()=>{const{renderToast:t}=ce(),o=xe(),[a,s]=p.exports.useState({}),[n,l]=p.exports.useState([]),[r,i]=p.exports.useState(!1),{user:d}=je(),y=new Date,f=hs(y),N=fs(y),g=(m,j)=>{m.stopPropagation(),o(`/${ie.METAS}`,{state:j})},h=async(m=f,j=N)=>{i(!0);try{const U=await Ee(`/evento/filtro/${m}/${j}?terapeutaId=${d.id}`);let b=Object.keys(U).sort();s(U),l(b)}catch{s([]),t({type:"failure",title:"401",message:"Per\xEDodo n\xE3o encontrado!",open:!0})}i(!1)},I=m=>e(re,{type:"free",children:u("div",{className:"flex gap-2 w-full item-center",children:[u("div",{className:"grid text-center font-inter text-sm text-gray-400",children:[u("span",{children:[" ",m.start]})," -",e("span",{children:m.end})]}),u("div",{className:"text-gray-800 text-center flex items-center justify-center text-md",children:["  ",m.title]})]})},m.id),w=m=>e(re,{type:m.especialidade.nome,onClick:()=>o(`/${ie.SESSION}`,{state:{item:m}}),children:u("div",{className:"flex",children:[e(et,{start:m==null?void 0:m.data.start,end:m==null?void 0:m.data.end,statusEventos:m==null?void 0:m.statusEventos.nome,title:m==null?void 0:m.title,localidade:m==null?void 0:m.localidade.nome,isExterno:m==null?void 0:m.isExterno,km:m==null?void 0:m.km,modalidade:m==null?void 0:m.modalidade.nome,dataInicio:m==null?void 0:m.dataInicio,dataFim:m==null?void 0:m.dataFim,dataAtual:m==null?void 0:m.dataAtual}),m.statusEventos.nome!==Ye.atendido&&e(W,{text:"Pesquisar",icon:"pi pi-file-edit",type:"primary",size:"icon",loading:r,onClick:j=>g(j,m)}),m.statusEventos.nome==Ye.atendido&&e(W,{text:"Atendido",type:"transparent",icon:"pi pi-check",size:"icon",color:"violet"})]})},m.id),S=m=>{switch(m.id){case 0:return I(m);default:return w(m)}},H=()=>r?e(Ze,{}):n.length?n.map(m=>u("div",{children:[e("div",{className:"font-inter m-2 text-gray-400",children:ot(m)}),a[m].map(j=>S(j))]},m)):u(re,{children:[" ",e(De,{})," "]}),T=p.exports.useMemo(()=>u("div",{className:"text-primary font-base grid justify-start m-2 leading-4",children:[e("span",{className:"font-bold",children:" Agenda "}),u("span",{className:"text-gray-400 font-light text-sm font-inter",children:[" ",ot(new Date)," "]})]}),[]),F=p.exports.useMemo(()=>e(Qe,{id:"form-filter-patient",legend:"Filtro",nameButton:"Agendar",fields:Jt,onSubmit:({dataInicio:m,datatFim:j})=>h(m,j),onReset:()=>h(),screen:"AGENDA_CALENDARIO",loading:r,dropdown:[]}),[]);return p.exports.useEffect(()=>{h()},[]),u(pe,{children:[F,T,H()]})};var Ae=(t=>(t.c="C",t.dt="DT",t.dp="DP",t.dg="DG",t.dv="DV",t))(Ae||{});const mo=u("svg",{version:"1.1",viewBox:"0 0 1600 1600",width:"1280",height:"1280",xmlns:"http://www.w3.org/2000/svg",children:[e("path",{transform:"translate(0)",d:"m0 0h1600v1600h-1600z",fill:"#662C75"}),e("path",{transform:"translate(773,169)",d:"m0 0h61l30 2 32 5 30 8 27 9 21 9 16 8 19 10 23 14 14 10 15 11 11 9 12 11 10 9 7 8 10 11 10 13 13 18 11 17 10 18 11 24 10 26 8 28 5 26 2 20v26l-3 24-5 23-8 24-9 20-8 14-9 13-8 10-11 13-10 9-9 7-14 9-17 8-15 5-18 4-22 2-23-2-32-6-21-6-21-8-22-12-13-9-15-13-9-9-12-16-9-16-7-18-8-30-5-19-4-8-3-2h-6l-9 6-4 5-4 7-3 14-3 46-2 58-4 91-7 121-1 31v45l1 23 4 35 6 26 5 12 9 13 9 6 7 2 12-1 14-4 25-13 17-12 11-8 14-11 11-9 13-11 8-7 13-11 14-11 13-10 17-12 13-8 17-10 16-8 21-8 19-5 7-1h25l20 4 15 6 12 8 8 7 7 8 10 14 11 21 7 19 6 22 4 22 3 26 1 17v47l-2 27-6 37-7 31-8 25-8 20-8 17-14 24-8 12-14 19-9 10-7 8-17 17-10 8-13 10-14 10-15 9-23 12-21 9-36 12-36 9-21 4-32 4-29 3-16 1h-53l-20-2-32-5-27-6-26-8-22-8-25-11-19-10-22-13-13-9-16-13-14-12-37-37-9-11-8-9-12-16-18-27-12-20-18-35-12-26-11-27-12-35-10-36-9-38-7-36-5-35-3-34-3-53-1-26v-64l3-57 3-37 7-56 7-45 9-46 10-42 10-35 15-43 15-36 16-32 6-11 6-10 10-16 13-19 14-18 10-12 7-8 15-16 7-6 5-5 8-7 10-8 11-8 17-12 10-6 21-12 25-11 36-12 23-6 22-4z",fill:"#FDFDFD"})]}),ho=u("svg",{version:"1.1",viewBox:"0 0 1600 1600",width:"1280",height:"1280",xmlns:"http://www.w3.org/2000/svg",children:[e("path",{transform:"translate(0)",d:"m0 0h1600v1600h-1600z",fill:"#682D75"}),e("path",{transform:"translate(374,334)",d:"m0 0h42l24 2 31 4 25 6 21 8 16 8 23 13 22 15 13 10 13 11 11 9 15 14 9 9 7 8 11 12 9 11 12 15 13 18 11 17 12 20 14 27 11 23 8 19 10 29 7 23 6 29 4 27 3 35 1 25v49l-2 33-3 28-6 35-9 40-11 36-12 32-11 24-12 23-8 14-11 17-10 15-12 16-11 13-9 11-22 22-8 7-9 8-14 11-18 13-15 10-20 12-16 8-16 7-16 5-16 3-40 4h-47l-37-4-24-4-22-6-21-8-16-9-9-7-10-10-8-14-5-12-5-21-13-73-13-75-18-109-15-95-15-101-10-71-10-77-6-50-4-45-3-42 1-17 5-10 10-13 9-9 17-13 22-12 14-6 24-8 31-8 32-6 43-5z",fill:"#FEFFFE"}),e("path",{transform:"translate(1039,294)",d:"m0 0h54l34 2 45 4 29 4 38 7 36 8 29 8 29 10 26 11 25 12 24 14 16 12 11 9 16 16 10 13 10 15 8 16 6 15 6 21 2 14v26l-4 26-5 19-8 21-8 14-12 17-13 10-14 8-19 7-17 4-27 3-15 1h-45l-39-3h-5l2 24 5 102 1 24 1 41v90l-1 31-4 48-6 45-7 40-8 32-10 30-9 20-10 19-13 18-11 12-12 11-13 8-17 7-20 5h-29l-19-3-31-7-20-6-19-8-19-10-13-10-10-9-9-10-9-13-8-16-6-15-7-27-4-26-1-11v-42l3-37 6-47 5-38 10-60 11-64 9-50 12-70 9-53 4-26-14-2-44-8-24-7-25-10-17-8-13-9-13-11-10-10-13-18-10-21-6-20-4-22v-29l4-23 8-20 7-12 11-13 13-13 18-13 18-10 17-8 25-8 31-8 30-5 39-4z",fill:"#FEFFFE"}),e("path",{transform:"translate(414,632)",d:"m0 0h24l15 4 12 6 10 9 9 11 10 17 6 15 5 16 4 19 2 18v31l-3 24-6 25-9 27-12 25-7 10-9 12-7 9-10 7h-3l-8-55-8-47-9-50-8-43-10-48-5-26v-9l4-4 6-2z",fill:"#682D75"})]}),fo=u("svg",{version:"1.1",viewBox:"0 0 1600 1600",width:"1280",height:"1280",xmlns:"http://www.w3.org/2000/svg",children:[e("path",{transform:"translate(0)",d:"m0 0h1600v1600h-1600z",fill:"#682D75"}),e("path",{transform:"translate(1028,292)",d:"m0 0h65l48 3 37 4 31 6 25 7 24 8 22 9 19 10 18 10 21 14 16 12 14 12 16 16 9 11 12 15 16 24 12 22 10 21 9 23 12 36 7 26 6 32 2 18 1 19v17l-2 28-4 25-6 26-11 33-9 20-12 22-9 14-10 14-13 16-7 7-7 8-16 15-13 10-14 10-18 11-22 12-29 12-27 9-26 6-26 4-34 3-18 1h-50l1 13v101l-3 31-4 23-6 21-9 21-10 16-11 13-8 8-8 6-10 6-12 5-16 5-21 4-17 2h-24l-25-3-30-7-21-8-18-10-10-8-9-8-9-11-10-14-9-16-8-20-6-19-8-32-5-27-4-33-2-40-2 1-7 25-9 22-9 17-8 16-11 20-9 14-11 16-13 18-10 12-9 11-28 28-11 9-13 11-18 13-20 13-15 9-23 12-15 6-15 4-25 4-27 2-30 1-35-2-32-4-23-5-21-7-18-8-12-7-10-9-7-7-9-15-6-20-7-37-18-102-12-74-9-55-10-64-17-114-8-59-10-75-10-82-3-32-3-44v-27l6-12 9-12 11-11 12-9 20-12 15-7 30-10 36-9 30-5 32-4 26-2 20-1h35l31 2 29 4 24 6 25 10 26 14 24 16 19 14 13 11 14 12 25 25 7 8 13 15 11 14 12 16 14 21 15 25 19 38 13 28 11 28 8 28 5 23 3 18h3l1-25 7-73 9-74 6-37 10-47 7-26 7-21 10-24 7-14 10-17 10-13 11-12 10-8 16-9 15-6 24-5 27-3z",fill:"#FEFFFE"}),e("path",{transform:"translate(432,631)",d:"m0 0h19l14 3 12 5 11 8 10 12 8 13 8 17 7 22 4 21 2 27-1 24-4 24-5 19-8 24-11 24-12 18-12 16-9 8-4 1-3-13-4-31-7-43-8-45-9-50-13-66-4-21-1-10 3-4z",fill:"#682D75"}),e("path",{transform:"translate(1119,528)",d:"m0 0 16 3 17 6 16 8 9 7 11 11 8 15 3 10v23l-4 16-9 21-8 14-12 16-11 13-11 12-10 9-12 11-8 7-10 6-6 3-4-1 4-86 4-40 6-40 7-36 3-7z",fill:"#682D75"})]}),xo=u("svg",{version:"1.1",viewBox:"0 0 1600 1600",width:"1280",height:"1280",xmlns:"http://www.w3.org/2000/svg",children:[e("path",{transform:"translate(0)",d:"m0 0h1600v1600h-1600z",fill:"#682D75"}),e("path",{transform:"translate(1142,292)",d:"m0 0h27l35 3 29 5 21 6 20 8 25 12 27 16 19 14 10 8 12 11 19 19 9 11 11 14 11 17 12 21 9 20 9 25 5 18 4 24 1 10v17l-3 27-6 26-6 18-9 19-9 15-9 12-11 12-17 13-21 10-16 5-17 3h-35l-20-3-15-4-14-6-15-10-11-9-10-11-10-15-5-10-5-16-1-5v-8l2-8v-8l-4-13-6-10-1-1h-7l-2 5-8 16-16 33-16 36-20 49-14 39-12 36-10 38-6 29-4 28-1 11v26l3 14 4 11 7 9 8 6 9 4 4 1h11l9-4 11-7 10-10 6-9 2-6v-10l-4-8-6-5-19-11-11-6-5-7-2-7-1-15 4-20 5-12 6-10 7-8 15-10 15-6 22-4 17-1h39l40 2 35 4 23 5 17 5 19 8 11 8 10 9 9 13 7 14 5 16 3 19v18l-3 29-5 29-7 32-12 36-11 26-10 20-14 23-12 17-10 13-10 11-7 8-11 11-11 9-12 10-15 10-16 10-23 12-19 8-22 7-27 6-26 4-10 1h-39l-25-3-30-5-26-7-27-10-27-13-19-12-16-13-8-7-18-18-9-11-10-13-9-14-10-18-8-16-10-22-12-34-9-30-7-30-3-17-4-34-2 7-3 18-6 20-12 32-11 26-16 32-9 16-15 24-13 18-11 14-11 13-11 12-1 2h-2l-2 4-6 5-12 12-11 9-12 10-20 14-17 11-21 12-25 12-21 7-20 4-26 2-19 1h-31l-36-3-24-4-26-7-22-8-16-8-11-8-10-10-9-13-7-22-9-47-15-90-9-58-14-92-10-68-13-93-10-77-9-74-7-61-4-48-2-38v-21l5-12 10-14 8-8 12-9 22-13 20-9 27-9 29-7 27-5 32-4 26-2 28-1h30l29 1 28 3 19 4 20 6 18 8 16 8 20 12 12 8 18 13 14 11 12 11 8 7 21 21 7 8 11 13 13 17 15 20 11 17 14 24 14 27 9 19 12 30 12 36 6 23 5 26 2 15 1 2h2l2-15 9-40 8-30 16-47 11-29 8-19 9-20 13-27 12-21 6-11 12-19 13-19 14-18 9-11 9-10 7-8 22-22 11-9 14-11 22-14 19-9 22-8 21-5 31-4z",fill:"#FEFEFE"}),e("path",{transform:"translate(456,627)",d:"m0 0h11l15 3 10 4 10 8 10 11 9 14 8 17 7 22 4 21 2 22v16l-3 26-6 25-8 25-7 16-10 19-7 10-7 11-8 10-7 4-5-1-2-4-3-30-13-79-10-61-12-62-5-24-3-12v-6l3-2z",fill:"#682D75"})]}),go=u("svg",{version:"1.1",viewBox:"0 0 1600 1600",width:"1280",height:"1280",xmlns:"http://www.w3.org/2000/svg",children:[e("path",{transform:"translate(0)",d:"m0 0h1600v1600h-1600z",fill:"#682D75"}),e("path",{transform:"translate(937,305)",d:"m0 0h11l23 2 25 6 16 6 13 7 12 9 10 9 9 10 9 13 8 16 6 17 6 24 5 29 4 40 3 57 1 37v128l2 4 5 8 1 4 3-9 10-56 17-85 13-55 8-29 12-38 11-28 8-18 12-21 9-13 9-12 15-16 15-13 16-10 16-8 15-5 25-4h38l30 4 20 5 19 7 24 12 13 9 14 11 12 12 12 16 11 19 8 19 6 23 3 23v26l-3 30-7 39-9 37-10 36-13 40-16 44-16 40-13 31-16 36-11 24-13 28-20 41-27 54-12 22-12 24-12 22-16 30-12 22-16 29-13 22-10 15-7 11-11 13-9 11-8 7-12 11-14 10-16 10-21 10-21 7-23 5-18 2h-26l-27-3-25-5-20-6-20-8-17-8-18-11-16-12-17-16-13-13-11-14-16-24-12-21-14-30-11-29-12-37-11-40-12-52-8-44-9-58-5-46-4-52-2-35-1-32v-28l1-36 4-55 8-71 5-28 6-23 8-22 8-16 11-17 9-11 13-13 14-11 19-11 10-5 15-5 23-5z",fill:"#FEFEFE"}),e("path",{transform:"translate(359,338)",d:"m0 0h29l38 3 27 4 23 6 19 8 19 10 11 6 30 20 17 13 11 9 14 12 25 25 9 11 9 10 11 14 14 19 14 21 17 29 19 38 11 25 11 30 7 25 6 32 4 35 2 41v55l-1 21-5 40-6 32-8 36-9 31-7 20-10 25-10 22-10 19-11 19-14 21-11 16-18 22-10 11-7 8-8 8-8 7-11 10-11 9-16 12-15 10-14 9-18 10-21 10-19 6-26 5-22 3-16 1h-37l-23-2-26-4-24-5-20-6-15-6-15-8-10-8-7-7-9-14-4-10-6-25-14-71-12-66-10-56-20-116-8-49-10-62-13-85-19-135-6-48-3-42v-20l8-17 9-11 9-9 14-10 14-9 23-11 16-6 29-8 26-6 36-6 42-4z",fill:"#FEFEFE"}),e("path",{transform:"translate(390,636)",d:"m0 0h22l16 4 13 7 12 11 8 10 7 12 7 16 7 21 5 25 1 10v32l-4 24-9 36-9 22-8 16-12 19-10 13-5 5-7 1-2-4-3-26-6-29-11-66-16-81-9-37-5-25 1-9 6-5z",fill:"#682D75"})]});function Ge({value:t,onChange:o,disabled:a}){const[s,n]=p.exports.useState(t),l=[{value:Ae.c,icon:mo},{value:Ae.dt,icon:ho},{value:Ae.dp,icon:fo},{value:Ae.dg,icon:xo},{value:Ae.dv,icon:go}];return e(Ke,{value:s,options:l,onChange:i=>{const d=i.value;o(d),n(d)},optionLabel:"value",optionValue:"value",iconTemplate:({option:i})=>i==null?void 0:i.icon,className:"w-8 h-8",disabled:a})}const vo=u("svg",{version:"1.1",viewBox:"0 0 1600 1600",width:"1280",height:"1280",xmlns:"http://www.w3.org/2000/svg",children:[e("path",{d:"m0 0h1600v1600h-1600z",fill:"#672D74"}),e("path",{d:"m825 261h20l29 2...",fill:"#FDFDFD"})]}),bo=u("svg",{version:"1.1",viewBox:"0 0 1600 1600",width:"1280",height:"1280",xmlns:"http://www.w3.org/2000/svg",children:[e("path",{d:"m0 0h1600v1600h-1600z",fill:"#672C74"}),e("path",{d:"m997 295h20l24 3...",fill:"#FEFEFE"})]});function yo({value:t,onChange:o,disabled:a}){const[s,n]=p.exports.useState(t);return e(Ke,{value:s,options:[{value:"S",icon:vo},{value:"N",icon:bo}],onChange:i=>{const d=i.value;o(d),n(d)},optionLabel:"value",optionValue:"value",iconTemplate:({option:i})=>i==null?void 0:i.icon,className:"w-8 h-8",disabled:a})}var Y=(t=>(t[t.portage=1]="portage",t[t.vbMapp=2]="vbMapp",t[t.pei=3]="pei",t))(Y||{}),de=(t=>(t.sim="1",t.asVezes="0.5",t.nao="0",t))(de||{}),qe=(t=>(t.socializacao="Socializa\xE7\xE3o",t.cognicao="Cogni\xE7\xE3o",t))(qe||{}),Ue=(t=>(t[t.um=1]="um",t[t.dois=2]="dois",t[t.tres=3]="tres",t))(Ue||{});const mt="maintenance",Te="activity",ht="portage",ft="vbmapp",So=()=>{const{renderToast:t}=ce(),o=Se(),a=xe(),{state:s}=o,n=p.exports.useRef(null),[l,r]=p.exports.useState(10),[i,d]=p.exports.useState(1),[y,f]=p.exports.useState(""),[N,g]=p.exports.useState([]),[h,I]=p.exports.useState([]),[w,S]=p.exports.useState([]),[H,T]=p.exports.useState([]),[F,m]=p.exports.useState([]),[j,U]=p.exports.useState([]),[b,M]=p.exports.useState({}),[z,G]=p.exports.useState([]),[q,K]=p.exports.useState([]),[v,x]=p.exports.useState(!1),[E,A]=p.exports.useState(!1),L=async()=>{try{const c=await Ee(`/sessao/${s.item.id}`);if(c){f(c.resumo),M(c),x(!0);const[k,P]=await Promise.all([V(c.sessao,Te),V(c.maintenance,mt)]);g(k),S(c.portage),T(c.vbmapp),I(P),m(c.sessao)}else await C()}catch{}},C=async()=>{try{const c=await Ee(`/pei/activity/session/${s.item.paciente.id}`),[k,P,O,J]=await Promise.all([V(c.atividades,Te,Y.portage),V(c.maintenance,mt,Y.portage),V(c.portage,ht,Y.portage),V(c.vbmapp,ft,Y.vbMapp)]);g(k),m(c.sessao),I(P),S(O),T(J)}catch{}},B=async()=>{try{const c={calendarioId:s.item.id,pacienteId:s.item.paciente.id,sessao:F,maintenance:h,selectedMaintenanceKeys:j,resumo:y,date:s.item.date,portage:z,vbmapp:q,...b};v?await Be("/sessao",c):await Fe("/sessao",c),t({type:"success",title:"",message:"Sess\xE3o atualizada!",open:!0}),a(`/${ie.CALENDAR}`)}catch{t({type:"failure",title:"401",message:"Sess\xE3o n\xE3o atualizada!",open:!0})}},D=p.exports.useMemo(()=>{var c,k,P,O,J,Q,se,X,Ie,Ce,tt;return e(et,{start:(c=s.item)==null?void 0:c.data.start,end:(k=s.item)==null?void 0:k.data.end,statusEventos:(P=s.item)==null?void 0:P.statusEventos.nome,title:(O=s.item)==null?void 0:O.title,localidade:(J=s.item)==null?void 0:J.localidade.nome,isExterno:(Q=s.item)==null?void 0:Q.isExterno,km:(se=s.item)==null?void 0:se.km,modalidade:(X=s.item)==null?void 0:X.modalidade.nome,dataInicio:(Ie=s.item)==null?void 0:Ie.dataInicio,dataFim:(Ce=s.item)==null?void 0:Ce.dataFim,dataAtual:(tt=s.item)==null?void 0:tt.dataAtual})},[]),R=async(c,k,P=Y.portage)=>{const O={key:c.key,label:c.label};return c.permiteSubitens&&c.children&&c.children.length>0?(O.estimuloDiscriminativo=(c==null?void 0:c.estimuloDiscriminativo)||"",O.estimuloReforcadorPositivo=(c==null?void 0:c.estimuloReforcadorPositivo)||"",O.resposta=(c==null?void 0:c.resposta)||"",O.children=await Promise.all(c.children.map(async J=>({key:J.key,label:J.label,children:Array.from({length:10}).map(()=>null)})))):P===Y.vbMapp&&c.permiteSubitens?(O.children=Array.from({length:10}).map(()=>null),O.permiteSubitens=c.permiteSubitens):c.children&&c.children.length>0?O.children=await Promise.all(c.children.map(async J=>R(J,k,P))):O.children=Array.from({length:k===Te||k===ht||k===ft?l:i}).map(()=>null),O},V=async(c,k=Te,P=Y.portage)=>await Promise.all(c.map(async O=>R(O,k,P))),_=(c,k,P,O,J)=>e(Ge,{value:J,disabled:N[c].children[k].children[P].disabled||v,onChange:Q=>{const se=[...N];N[c].children[k].children[P].children[O]!==Q&&(se[c].children[k].children[P].children[O]=Q,m(se))}},O),$=(c,k,P,O)=>e(yo,{value:O,disabled:h[c].children[k].children[P].disabled||v,onChange:J=>{const Q=[...h];h[c].children[k].children[P].children[0]!==J&&(Q[c].children[k].children[P].children[0]=J,U(Q))}},0),ee=(c,k)=>u(vt,{className:"text-[8px]",children:[u("div",{className:"font-bold text-wrap",children:[" ",c," "]}),u("div",{className:"font-normal text-wrap",children:[" ",k]})]}),oe=(c,k,P,O)=>e(Ge,{value:O!=null&&O.children?O==null?void 0:O.children[P]:O,disabled:v,onChange:J=>{const Q=[...w],X=Q[c].children[k];X.children[P]&&X.children[P].children?X.children[P].children=X.children[P].children.map((Ie,Ce)=>Ce===P?J:Ie):X.children=X.children.map((Ie,Ce)=>Ce===P?J:Ie),G(Q)}},P),ae=()=>!!H.length&&u("div",{className:"mt-8",children:[e("div",{className:"text-gray-400 font-inter grid justify-start mx-2 mt-8 leading-4",children:e("span",{className:"font-bold",children:"VB Mapp"})}),e(re,{className:"rounded-lg cursor-not-allowed max-w-[100%]",children:e(ve,{children:H.map((c,k)=>e(be,{tabIndex:k,header:e("div",{className:"flex items-center w-full",children:e("span",{children:c.label})}),children:e(ve,{children:c==null?void 0:c.children.map((P,O)=>e(be,{tabIndex:O,className:"w-[90%]",header:e("div",{className:"flex items-center w-full",children:e("span",{children:P.label})}),children:P.children.map((J,Q)=>u("li",{children:[e("span",{children:J.label}),e("div",{className:"flex flex-col gap-1 m-4",children:Z(J,k,O)})]}))},P.key))})},c.key))})})]}),Z=(c,k,P)=>{var J,Q;if(c!=null&&c.children?(J=c==null?void 0:c.children[0])==null?void 0:J.label:!1)return u("div",{children:[u("div",{className:" grid grid-cols-3 gap-1 mb-2",children:[ee("SD (est\xEDmulo discriminativo)",(c==null?void 0:c.estimuloDiscriminativo)||""),ee("Resposta",(c==null?void 0:c.resposta)||""),ee("SR+ (est\xEDmulo refor\xE7ador positivo))",(c==null?void 0:c.estimuloReforcadorPositivo)||"")]}),c==null?void 0:c.children.map((se,X)=>u("div",{className:"flex flex-col ml-2",children:[u("span",{children:["- ",se.label]}),e("div",{className:"flex flex-col gap-1",children:Z(se.children,k,P)})]},X))]});if((c==null?void 0:c.label)&&(c==null?void 0:c.children.length)===10)return Z(c.children,k,P);if(c.length===10)return e("div",{className:"flex gap-1",children:c.map((se,X)=>oe(k,P,X,se))});(Q=c[0])!=null&&Q.children&&c.map((se,X)=>u("div",{className:"flex flex-col ml-2",children:[u("span",{children:["- ",se.label]}),e("div",{className:"flex flex-col gap-1",children:Z(se.children,k,P)})]},X))},te=()=>!!w.length&&u("div",{className:"mt-8",children:[e("div",{className:"text-gray-400 font-inter grid justify-start mx-2 mt-8 leading-4",children:e("span",{className:"font-bold",children:"Portage"})}),e(re,{className:"rounded-lg cursor-not-allowed max-w-[100%]",children:e(ve,{children:w.map((c,k)=>e(be,{tabIndex:k,header:e("div",{className:"flex items-center w-full",children:e("span",{children:c.label})}),children:c==null?void 0:c.children.map((P,O)=>u("li",{className:"my-2 grid gap-2 items-center",children:[e("span",{children:P.label}),e("div",{className:"flex flex-col gap-1",children:Z(P,k,O)})]},P.key))},c.key))})})]}),le=()=>!!N.length&&u("div",{className:"mt-8",children:[e("div",{className:"text-gray-400 font-inter grid justify-start mx-2  mt-8 leading-4",children:e("span",{className:"font-bold",children:" Manual "})}),!!N.length&&e("div",{className:"text-red-400 font-inter grid justify-start mx-2 leading-4 mt-2",children:e("span",{className:"text-md",children:"Interrompa o treino da atividade ao atingir 4 tentativas corretas consecutivas."})}),N.length?e(re,{className:"rounded-lg cursor-not-allowed max-w-[100%]",children:e(ve,{children:N.map((c,k)=>e(be,{tabIndex:k,header:e("div",{className:"flex items-center  w-full",children:e("span",{children:c.label})}),children:c==null?void 0:c.children.map((P,O)=>u("div",{className:"my-8",children:[u("span",{className:"font-bold font-inter",children:["Meta ",O+1,": "]})," ",e("span",{className:"font-base font-inter",children:P.label}),e("ul",{className:"list-disc mt-2 font-inter ml-4",children:P==null?void 0:P.children.map((J,Q)=>u("li",{className:"my-2",children:[e("span",{children:J.label}),e("div",{className:"flex gap-1 -ml-4",children:J==null?void 0:J.children.map((se,X)=>_(k,O,Q,X,se))})]},Q))})]},O))},k))})}):e(pe,{})]}),ge=()=>!!h.length&&u("div",{className:"mt-8",children:[e("div",{className:"text-gray-400 font-inter grid justify-start mx-2  mt-8 leading-4",children:e("span",{className:"font-bold",children:" Manuten\xE7\xE3o "})}),e(re,{className:"rounded-lg cursor-not-allowed max-w-[100%]",children:e(ve,{children:h.map((c,k)=>e(be,{tabIndex:k,header:e("div",{className:"flex items-center  w-full",children:e("span",{children:c.label})}),children:c==null?void 0:c.children.map((P,O)=>u("div",{className:"my-8",children:[u("span",{className:"font-bold font-inter",children:["Meta ",O+1,": "]})," ",e("span",{className:"font-base font-inter",children:P.label}),e("ul",{className:"list-disc mt-2 font-inter ml-4",children:P==null?void 0:P.children.map((J,Q)=>u("li",{className:"my-2 flex gap-2 -ml-4 items-center",children:[$(k,O,Q,0),e("span",{children:J.label})]},Q))})]},O))},k))})})]}),Ne=()=>u(pe,{children:[e("div",{className:"text-gray-400 font-inter grid justify-start mx-2  mt-8 leading-4",children:e("span",{className:"font-bold",children:" Resumo "})}),e(re,{className:"rounded-lg cursor-not-allowed max-w-[100%]",children:e(ds,{ref:n,value:y,config:{readonly:v,language:"pt_br",buttons:"bold,italic,underline,strikethrough,font,fontsize,paragraph,copyformat,table,fullsize,preview",saveModeInStorage:!0},onBlur:c=>f(c),onChange:c=>{}})})]}),Oe=()=>!v&&e("div",{className:"mt-auto",children:e(W,{text:"Salvar",icon:"pi pi-check",type:"primary",size:"full",loading:E,onClick:()=>B(),disabled:v})});return p.exports.useEffect(()=>{L()},[]),u("div",{className:"grid overflox-y-auto",children:[D,u("div",{className:"",children:[le(),te(),ae(),ge(),Ne()]}),Oe()]})},Yt=Vt,wo={};Yt.forEach(t=>wo[t.id]="");const Eo=()=>{const{renderToast:t}=ce(),o=xe(),a=Se(),{state:s}=a,[n,l]=p.exports.useState(!1),[r,i]=p.exports.useState([]),[d,y]=p.exports.useState({}),[f,N]=p.exports.useState(Y.pei),g=F=>{o(`/${ie.PROTOCOLO}`,{state:{item:F,tipoProtocolo:f}})},h=async F=>{l(!0);try{const m=F.paciente;await xs(`pei/${F.id}`),S({pacienteId:m}),t({type:"success",title:"Sucesso!",message:"PEI removido!",open:!0})}catch{t({type:"failure",title:"401",message:"PEI n\xE3o encontrado!",open:!0})}l(!1)},I=(F,m)=>u(vt,{className:"text-[8px]",children:[u("div",{className:"font-bold text-wrap",children:[" ",F," "]}),u("div",{className:"font-normal text-wrap",children:[" ",m]})]}),w=()=>n?e(Ze,{}):d.length?e(re,{children:e(ve,{children:d.map((F,m)=>{var j;return e(be,{header:u("div",{className:"flex items-center  w-full",children:[e("span",{children:F.programa.nome}),f===Y.pei&&u("div",{className:"ml-auto",children:[e(W,{text:"editar",type:"transparent",size:"icon",icon:"pi pi-pencil",color:"violet",onClick:()=>g(F),loading:n}),e(W,{text:"remove",icon:"pi pi-trash",type:"transparent",color:"red",size:"icon",onClick:()=>h(F),loading:n})]})]}),tabIndex:m,children:u("div",{className:"w-full overflow-y-auto",children:[u("div",{className:"font-bold my-2",children:[" ",((j=F.procedimentoEnsino)==null?void 0:j.nome)||""]}),u("div",{className:" grid grid-cols-3 gap-1",children:[F.estimuloDiscriminativo&&I("SD (est\xEDmulo discriminativo)",F.estimuloDiscriminativo),F.resposta&&I("Resposta",F.resposta),F.estimuloReforcadorPositivo&&I("SR+ (est\xEDmulo refor\xE7ador positivo))",F.estimuloReforcadorPositivo)]}),e("div",{className:"my-2",children:F.metas.map((U,b)=>u("div",{children:[u("span",{className:"flex align-items-center gap-2 w-full font-inter",children:["Meta ",b+1,": ",U.value]}),e("ul",{className:"list-disc	ml-8 font-inter",children:U.subitems&&U.subitems.map((M,z)=>u("li",{children:[" ",M.value," "]},z))})]},b))})]})},m)})})}):u(re,{children:[" ",e(De,{})," "]}),S=async({pacienteId:F,protocoloId:m})=>{if(!!m){l(!0),m&&N(m.id);try{const{data:j}=await ye("pei",{paciente:F,protocoloId:m});y(j)}catch{y([]),t({type:"failure",title:"401",message:"PEI n\xE3o encontrado!",open:!0})}l(!1)}},H=()=>e(Qe,{id:"form-filter-pei",legend:"Filtro",nameButton:"Cadastrar",fields:Yt,dropdown:r,onSubmit:F=>S(F),onReset:()=>y([]),screen:"PEI",loading:n,onInclude:()=>o(`/${ie.PROTOCOLO}`,{state:{tipoProtocolo:f,pacienteId:s.pacienteId}}),defaultValues:s}),T=p.exports.useCallback(async()=>{const[F,m]=await Promise.all([ue("paciente"),ue("protocolo")]);i({paciente:F,protocolo:m}),s&&S(s)},[]);return p.exports.useEffect(()=>{T()},[]),u("div",{children:[H(),w()]})},Gt=Vt,No={};Gt.forEach(t=>No[t.id]="");function Io(){const[t,o]=p.exports.useState(!1),[a,s]=p.exports.useState([]),[n,l]=p.exports.useState({});p.exports.useState(0);const{renderToast:r}=ce();xe();const i=async({pacienteId:g})=>{o(!0);try{const h=await Ee(`sessao/atividade/${g.id}`);l(h)}catch{l([]),r({type:"failure",title:"401",message:"PEI n\xE3o encontrado!",open:!0})}o(!1)},d=()=>e(Qe,{id:"form-filter-pei",legend:"Filtro",nameButton:"Cadastrar",fields:Gt,dropdown:a,onSubmit:g=>i(g),onReset:()=>l([]),screen:"PEI",loading:t}),y=(g,h)=>g.dias[h]?u("div",{className:"grid grid-rows-3 justify-center",children:[e("div",{className:"flex justify-center",children:g.dias[h].data}),u("div",{className:"flex gap-2 justify-center",children:[e("div",{className:he("flex justify-center items-center font-inter font-light rounded-full w-4 h-4",{"bg-green-400  text-white":g.dias[h].primeiraResposta}),children:"S"}),e("div",{className:he("flex justify-center items-center font-inter font-light rounded-full w-4 h-4",{"bg-red-400  text-white":!g.dias[h].primeiraResposta}),children:"N"})]}),u("div",{className:"flex justify-center",children:[g.dias[h].porcentagem,"%"]})]}):"-",f=()=>t?e(Ze,{}):n.length?e(re,{children:e(ve,{children:n.map((g,h)=>e(be,{tabIndex:h,header:e("div",{className:"flex items-center  w-full",children:e("span",{children:g.programa})}),children:u(as,{value:g.children,scrollable:!0,children:[e(st,{field:"programa",header:"Programa",style:{width:"25%"}}),Array.from({length:g.qtdColumns}).map((I,w)=>e(st,{body:S=>y(S,w)}))]})},h))})}):u(re,{children:[" ",e(De,{})," "]}),N=p.exports.useCallback(async()=>{const[g]=await Promise.all([ue("paciente")]);s({paciente:g})},[]);return p.exports.useEffect(()=>{N()},[]),u("div",{children:[d(),f()]})}const Co=u("svg",{version:"1.1",viewBox:"0 0 1600 1600",width:"1280",height:"1280",xmlns:"http://www.w3.org/2000/svg",children:[e("path",{transform:"translate(0)",d:"m0 0h1600v1600h-1600z",fill:"#672D74"}),e("path",{transform:"translate(825,261)",d:"m0 0h20l29 2 27 4 21 5 20 7 20 9 16 8 22 13 19 13 11 9 10 9 15 15 13 17 10 16 8 16 6 19 2 13v11l-2 16-5 16-7 16-12 20-10 13-17 17-15 10-15 8-15 5-16 3h-14l-17-3-10-4-12-9-8-10-8-16-7-20-9-27-6-8-8-4-13-2-12 3-11 6-8 7-8 13-5 14-2 18 1 15 5 15 9 16 11 14 11 12 8 8 11 9 14 11 19 14 33 22 15 11 34 24 17 13 14 12 12 11 16 16 9 11 10 12 13 19 8 13 12 23 10 22 9 28 6 25 4 28 1 19v16l-2 23-5 28-5 19-7 20-9 20-10 19-9 14-10 14-10 13-10 11-7 8-12 12-11 9-10 8-14 10-14 9-17 10-23 12-25 10-22 7-26 6-23 3-17 1h-21l-20-1-29-4-24-5-28-7-29-10-26-11-22-10-23-13-18-12-10-8-13-11-9-9-6-5-7-8-11-13-11-17-12-23-7-19-4-20v-20l3-15 5-16 7-14 9-14 9-11 10-10 10-7 12-5 9 1 18 6 37 17 27 13 25 10 22 6 13 2h21l14-3 10-5 6-5 9-12 4-12v-15l-4-15-10-19-10-13-14-14-14-11-17-13-14-10-34-23-15-11-18-14-12-11-8-7-13-14-11-14-8-10-10-15-11-19-9-17-11-26-8-24-7-26-5-28-1-11v-43l5-33 7-28 11-29 8-17 11-19 12-17 8-10 7-9 9-10 22-22 13-10 14-10 17-11 18-10 22-10 35-12 24-6 23-4 19-2z",fill:"#FDFDFD"})]}),Ao=u("svg",{version:"1.1",viewBox:"0 0 1600 1600",width:"1280",height:"1280",xmlns:"http://www.w3.org/2000/svg",children:[e("path",{transform:"translate(0)",d:"m0 0h1600v1600h-1600z",fill:"#682D76"}),e("path",{transform:"translate(409,197)",d:"m0 0h43l30 3 24 4 21 6 21 9 18 10 20 13 10 8 14 12 11 11 9 11 11 14 11 16 12 19 9 16 12 23 16 35 11 27 10 26 12 34 13 38 14 43 12 38 16 55 10 38 10 44 7 37 8 49 5 40 2 24v49l-3 30-5 30-5 19-9 24-8 15-14 20-10 10-14 11-18 10-20 7-25 5-21 2h-19l-22-3-21-6-16-8-12-8-12-11-11-15-9-16-10-25-6-21-5-20-2-3-41 6-31 6-31 7-3 1 1 9 6 19 3 17 1 12v12l-1 16-5 23-8 20-8 15-12 16-10 11-17 12-16 8-19 6-25 5-8 1h-21l-20-3-25-7-21-9-15-9-14-11-12-12-9-11-11-15-14-24-12-26-11-30-8-27-7-29-6-31-6-43-3-32-2-39v-56l2-43 5-57 6-58 6-42 9-53 8-40 16-64 12-36 10-25 13-29 12-22 9-14 8-12 12-16 11-13 11-12 13-13 14-11 10-7 18-11 16-8 21-8 23-6 21-4z",fill:"#FEFEFE"}),e("path",{transform:"translate(985,196)",d:"m0 0h23l23 3 19 5 15 6 13 7 12 9 12 11 11 13 8 13 7 14 6 18 4 17 4 29 3 35 1 19 1 48v111l-2 49v27l1 1-1 10v5h3l3-12 6-23 10-50 17-77 16-63 16-50 8-22 11-26 10-19 11-18 8-11 8-10 11-12 14-13 20-13 17-8 23-6 18-3h29l30 4 23 5 18 6 21 10 18 11 14 11 11 10 9 11 10 14 11 21 7 19 4 17 2 14v45l-5 32-7 31-10 38-12 38-15 42-12 30-15 36-16 36-16 34-9 20-21 42-10 19-19 37-12 22-13 24-12 22-15 27-14 25-10 17-11 19-14 24-11 18-12 18-11 15-12 14-14 14-10 8-15 11-21 12-25 10-21 6-19 4-9 1h-28l-27-4-30-7-30-10-17-8-19-11-14-10-11-9-12-11-7-8-12-14-14-20-9-15-10-18-10-22-8-20-12-36-13-44-7-33-10-59-6-45-8-68-3-35-2-31v-75l3-56 6-69 4-37 4-24 9-36 8-24 8-16 9-15 11-14 10-11 11-9 13-10 16-9 14-6 17-5 17-3z",fill:"#FEFEFE"}),e("path",{transform:"translate(408,451)",d:"m0 0h6l6 4 4 6 8 28 10 43 7 35 10 56 6 36 11 80 1 8v9l-4 2-54 7h-14l-2-11-4-74-1-27-1-58v-36l1-60 1-26 2-13 3-6z",fill:"#682D76"})]}),Po=u("svg",{version:"1.1",viewBox:"0 0 1600 1600",width:"1280",height:"1280",xmlns:"http://www.w3.org/2000/svg",children:[e("path",{transform:"translate(0)",d:"m0 0h1600v1600h-1600z",fill:"#672C74"}),e("path",{transform:"translate(997,295)",d:"m0 0h20l24 3 19 5 16 7 12 7 14 10 10 10 9 12 11 17 11 24 5 15 6 25 6 37 6 59 5 61 4 71 2 43 2 79v72l-1 45-2 42-4 46-7 51-6 34-8 33-12 36-9 21-10 18-16 23-18 18-16 10-14 7-20 6-19 3h-20l-20-3-15-4-16-6-17-9-15-11-12-11-8-8-9-11-14-19-13-22-12-23-14-29-14-34-24-64-15-44-15-42-12-36-5-10-2-1 6 29 5 33 4 36 2 40v68l-2 28-4 28-6 27-7 22-7 17-10 18-10 14-14 15-11 8-14 7-15 5-16 2h-18l-21-2-21-5-21-9-15-9-10-8-9-8-7-8-10-13-8-13-10-19-9-25-7-25-8-38-5-31-5-49-3-51-1-36v-61l2-97 3-71 5-69 6-65 5-37 7-30 10-27 10-19 8-14 12-16 9-11 11-12 13-12 13-10 14-9 25-12 14-4 15-3 9-1h22l19 3 18 6 15 8 14 10 15 13 9 9 9 11 11 14 11 16 10 17 13 24 11 23 15 34 13 32 14 43 14 49 9 33 15 45 3 2-7-32-7-46-7-47-8-46-5-46-3-41v-30l3-26 6-22 8-16 10-17 9-11 14-14 12-9 18-10 14-5 19-4z",fill:"#FEFEFE"})]});function qt({value:t,onChange:o,disabled:a}){const[s,n]=p.exports.useState(t),l=[{value:de.sim,icon:Co},{value:de.asVezes,icon:Ao},{value:de.nao,icon:Po}];return e(Ke,{value:s,options:l,onChange:i=>{const d=i.value;o(d),n(d)},optionLabel:"value",optionValue:"value",iconTemplate:({option:i})=>i==null?void 0:i.icon,className:"w-8 h-8",disabled:a})}const ko=t=>{const o=new It,a=Xe;o.addImage(a,"PNG",15,10,50,20),o.setFontSize(9),o.text("Cel: (11) 97271-6993 \u2022 E-mail: alcance.nt@yahoo.com",15,35),o.text("CNPJ: 37.999.009/0001-68",15,40),o.setFontSize(12),o.setFont("Helvetica","bold"),o.text("RELAT\xD3RIO DE INTERVEN\xC7\xC3O ABA INDIVIDUALIZADO \u2013 EVOLU\xC7\xC3O 1",15,55),o.setFontSize(9),o.setFont("Helvetica","normal"),o.text("* Confidencial conforme \xE9tica profissional, n\xE3o possui fins jur\xEDdicos e todos os dados obtidos devem ser considerados relativos ao atual momento desta avalia\xE7\xE3o e consequentemente do desenvolvimento da crian\xE7a.",15,60,{maxWidth:180}),o.setFontSize(10),o.setFont("Helvetica","bold"),o.text("Interessados:",15,75),o.setFont("Helvetica","normal"),o.text("- Aos Pais , aplicadores e m\xE9dica neuropediatra",45,75),o.setFont("Helvetica","bold"),o.text("DADOS DE IDENTIFICA\xC7\xC3O:",15,85),o.setFont("Helvetica","normal"),o.text(`Nome: ${t.paciente.nome}`,15,90),o.text(`Data de Nascimento: ${t.paciente.dataNascimento}`,110,90),o.setFont("Helvetica","bold"),o.text("Resultados das \xE1reas reavaliadas:",15,100),o.setFont("Helvetica","italic"),o.text("- Desenvolvimento Infantil: Reaplicada a Escala de Desenvolvimento Infantil Portage:",15,105),Re(o,{head:[["Socializa\xE7\xE3o"]],theme:"plain",styles:{fontSize:12,fontStyle:"bold",halign:"center"},startY:115}),Re(o,{head:[t.headers],body:t.Socializacao,startY:o.lastAutoTable.finalY+5,styles:{fontSize:10,halign:"center"},headStyles:{fillColor:[240,240,240],textColor:[0,0,0],fontStyle:"bold"},columnStyles:{0:{halign:"center"},1:{halign:"center"},2:{halign:"center"}}}),Re(o,{head:[["Cogni\xE7\xE3o"]],theme:"plain",styles:{fontSize:12,fontStyle:"bold",halign:"center"},startY:o.lastAutoTable.finalY+10}),Re(o,{head:[t.headers],body:t.Cognicao,startY:o.lastAutoTable.finalY+5,styles:{fontSize:10},headStyles:{fillColor:[240,240,240],textColor:[0,0,0],fontStyle:"bold"},columnStyles:{0:{halign:"center"},1:{halign:"center"},2:{halign:"center"}}});const s=o.internal.pageSize.height;o.text("Av. Henrique Andr\xE9s, 700 \u2013 Centro \u2013 Jundia\xED-SP",10,s-10),window.open(o.output("bloburl"))};function Fo({paciente:t}){const[o,a]=p.exports.useState(!1),[s,n]=p.exports.useState({}),[l,r]=p.exports.useState([]),{renderToast:i}=ce(),d=xe(),y=Se(),{state:f}=y,[N,g]=p.exports.useState(!1),h=async()=>{const{data:b}=await ye("protocolo",{pacienteId:t.id,protocoloId:Y.portage,type:"pdf"});b?await ko(b):(a(!1),i({type:"failure",title:"Erro!",message:"N\xE3o existe Portage cadastrado no momento!",open:!0}))},I=p.exports.useCallback(async()=>{try{const b=await ue("protocolo/portage");n(b)}catch(b){console.error("Error fetching dropdown data",b)}},[]),w=b=>b===de.sim?de.asVezes:b===de.asVezes?de.nao:b===de.nao?null:de.sim,S=(b,M,z,G=void 0)=>{n(q=>{var E;const K=JSON.parse(JSON.stringify(q)),v=(E=K==null?void 0:K[b])==null?void 0:E[M];if(!v)return q;if(z.toString().includes("-sub-item-")){const[A]=z.split("-sub-item-"),[,L]=A.split("0-meta-"),C=v.findIndex(B=>B.id===parseInt(L)||B.id===A);if(C!==-1){const B=v[C].subitems.findIndex(D=>D.id===z);B!==-1&&(v[C].subitems[B].selected=G!==void 0?G:w(v[C].subitems[B].selected))}}else{const A=v.findIndex(L=>L.id===z);A!==-1&&(v[A].selected=G!==void 0?G:w(v[A].selected))}return K})},H=async()=>{a(!0);const b={pacienteId:t,portage:s};try{await Fe("protocolo/portage",b),sessionStorage.removeItem("draftSubitems"),g(!0),i({type:"success",title:"Sucesso!",message:"Portage Cadastrado.",open:!0})}catch(M){console.error("Error saving form data",M),i({type:"failure",title:"Erro!",message:"Falha na conex\xE3o",open:!0})}finally{a(!1)}},T=b=>{var x;const M=b.id.toString().startsWith("0-meta-")?b.id:`0-meta-${b.id}`,z=b!=null&&b.selected?{selected:b.selected}:{},G={...Pe,id:M,value:b.nome,faixaEtaria:b.faixaEtaria,estimuloDiscriminativo:b==null?void 0:b.estimuloDiscriminativo,estimuloReforcadorPositivo:b==null?void 0:b.estimuloReforcadorPositivo,procedimentoEnsino:b==null?void 0:b.procedimentoEnsinoId,programa:(b==null?void 0:b.programaId)||(b==null?void 0:b.programa),resposta:b==null?void 0:b.resposta,...z,subitems:((x=b==null?void 0:b.subitems)==null?void 0:x.map(E=>({...ze,id:E.id,value:E.nome,...E.selected&&{selected:E.selected}})))||[]},q=JSON.parse(sessionStorage.getItem("draftSubitems")||"[]"),K=parseInt(G.id.replace(/^0-meta-/,""),10),v=q.filter(E=>parseInt(E.id.replace(/^0-meta-/,""))!==K);v.push(G),sessionStorage.setItem("draftSubitems",JSON.stringify(v)),d(`/${ie.PROTOCOLO}`,{state:{edit:!0,item:{metas:[G],paciente:t},tipoProtocolo:Y.portage}})},F=(b,M,z)=>{var q;const G=z.selected||null;return u("div",{children:[u("div",{className:"flex items-center gap-2",children:[e(qt,{value:G,onChange:K=>S(b,M,z.id,K)},z.id),z.nome,(z==null?void 0:z.permiteSubitens)&&e("i",{className:"pi pi-pencil",onClick:()=>T(z)})]}),e("div",{className:"grid ml-8 mt-2",children:(q=z==null?void 0:z.subitems)==null?void 0:q.map(K=>F(b,M,K))})]})},m=b=>e("div",{className:"mt-8",children:(s==null?void 0:s[b])&&e(bt,{children:Object.keys(s[b]).map(M=>e(yt,{tabIndex:M,header:e("div",{children:M}),children:e(St,{value:s[b][M],selection:l,responsiveLayout:"scroll",dataKey:"id",children:e(wt,{body:z=>F(b,M,z),bodyStyle:{padding:".1rem"}})})},M))})}),j=()=>N&&e("div",{className:"mt-auto",children:e(W,{text:"Gerar Relat\xF3rio",type:"primary",size:"full",icon:"pi pi-file-pdf",onClick:h,loading:o,typeButton:"button"})}),U=()=>e("div",{className:"mt-auto",children:e(W,{text:"Salvar",type:"primary",size:"full",onClick:H,loading:o})});return p.exports.useEffect(()=>{if(f!=null&&f.metaEdit){const M=JSON.parse(sessionStorage.getItem("draftSubitems")||"[]"),z=f.metaEdit.id,G=M.findIndex(q=>q.id===z);G!==-1?M[G]={...f.metaEdit}:M.push(f.metaEdit),sessionStorage.setItem("draftSubitems",JSON.stringify(M))}(async()=>{const{data:M}=await ye("protocolo",{pacienteId:t.id,protocoloId:Y.portage,type:"local"});if(M){g(!0);let z=JSON.parse(JSON.stringify(M.portage));const G=JSON.parse(sessionStorage.getItem("draftSubitems")||"[]");if(G.length>0)for(const q of G){const K=q.programa,v=q.faixaEtaria,x=parseInt(q.id.replace(/^0-meta-/,""),10);z[K]||(z[K]={}),z[K][v]||(z[K][v]=[]);const E=z[K][v],A=E.findIndex(L=>L.id===x||L.id===q.id);if(A!==-1){const L=E[A].subitems||[],B=(q.subitems||[]).map(D=>{var V;const R=D.selected!==void 0?D.selected:(V=L.find(_=>_.id===D.id))==null?void 0:V.selected;return{...D,selected:R}});E[A]={...E[A],...q,subitems:B}}else E.push(q)}n(z)}else g(!1),I()})()},[t]),u("div",{className:"mt-8 space-y-6",children:[j(),m(qe.socializacao),m(qe.cognicao),U()]})}const Do="#03ae4e",Oo="#0071bd",Lo="#e36b05",Ro="#d9d9d9",Ve="#ffffff",He="#000000",To=({data:t,paciente:o})=>{const a=t,s=new It,n=Xe;s.addImage(n,"PNG",15,10,50,20),s.setFontSize(9),s.text("Cel: (11) 97271-6993 \u2022 E-mail: alcance.nt@yahoo.com",15,35),s.text("CNPJ: 37.999.009/0001-68",15,40),s.setFontSize(12),s.setFont("Helvetica","bold"),s.text("RELAT\xD3RIO DE INTERVEN\xC7\xC3O ABA INDIVIDUALIZADO",15,50),s.setFont("Helvetica","bold"),s.text("DADOS DE IDENTIFICA\xC7\xC3O:",15,60),s.setFont("Helvetica","normal"),s.text(`Nome: ${o.nome}`,15,65),s.text(`Data de Nascimento: ${o.dataNascimento}`,110,65);const l=s.internal.pageSize.width,r=8,i=2,d=2,y=2,f=10;let N=70;const g=w=>w===1?Lo:w===2?Do:w===3?Oo:Ve;Object.keys(a).map(Number).sort((w,S)=>S-w).forEach(w=>{const S=Object.keys(a[w]);N+=15,s.setFontSize(14),s.text(`N\xEDvel ${w}`,l/2,N,{align:"center"}),N+=5;const H=S.reduce((F,m)=>{const j=Object.keys(a[w][m]).length;return F+j*r+y*(j-1)+20},-20);let T=(l-H)/2;S.forEach(F=>{const m=Object.keys(a[w][F]);s.setFontSize(10),s.text(F,T+m.length*r/2,N,{align:"center"});const j=N+2;m.forEach((U,b)=>{const M=T+b*r;s.setFillColor(Ro),s.rect(M,j,r,i,"F"),s.setTextColor(He),s.setFontSize(4),s.setDrawColor(He),s.setLineWidth(.2),s.rect(M,j,r,i),s.text(U.toUpperCase(),M+r/2,j+i/2+.5,{align:"center"})});for(let U=0;U<f;U++)m.forEach((b,M)=>{const G=Object.keys(a[w][F][b])[U],q=G?a[w][F][b][G].percentual:0,K=g(w),v=T+M*r,x=j+i+U*d;q===100?(s.setFillColor(K),s.rect(v,x,r,d,"F")):q===50?(s.setFillColor(K),s.rect(v,x+d/2,r,d/2,"F"),s.setFillColor(Ve),s.rect(v,x,r,d/2,"F")):(s.setFillColor(Ve),s.rect(v,x,r,d,"F")),s.setDrawColor(He),s.setLineWidth(.2),s.rect(v,x,r,d)});T+=m.length*r+20}),N+=i+f*y+1});const I=s.internal.pageSize.height;s.setFontSize(8),s.text("Av. Henrique Andr\xE9s, 700 \u2013 Centro \u2013 Jundia\xED-SP",10,I-10),window.open(s.output("bloburl"))};function zo({paciente:t}){const[o,a]=p.exports.useState(!1),[s,n]=p.exports.useState({}),[l,r]=p.exports.useState([]),{renderToast:i}=ce(),[d,y]=p.exports.useState(Ue.um),[f,N]=p.exports.useState(Ue.um-1),[g,h]=p.exports.useState(!1),I=Se(),{state:w}=I,S=xe(),H=p.exports.useCallback(async()=>{try{const{data:x}=await ye("protocolo",{pacienteId:t.id,protocoloId:Y.vbMapp,type:"pdf"});x?await To(x):(a(!1),i({type:"failure",title:"Erro!",message:"N\xE3o existe Portage cadastrado no momento!",open:!0}))}catch(x){console.error("Erro ao gerar PDF",x)}},[t.id,i]),T=p.exports.useCallback(async(x=d)=>{const{data:E}=await ye("protocolo",{pacienteId:t.id,protocoloId:Y.vbMapp,nivel:x});m(E.data),h(E.existeResposta)},[d,t.id]),F=x=>{const E=x.match(/-meta-(\d+)$/);return E?parseInt(E[1],10):null},m=x=>{if(!(w!=null&&w.metaEdit)||w.pacienteId.id!==t.id){n(x);return}const E=JSON.parse(JSON.stringify(x)),A=w.metaEdit.programa;if(!E[A]){console.error("Programa n\xE3o encontrado em copyList:",A);return}E[A]=E[A].map(L=>{const C=w.metaEdit.metas.find(B=>F(B.id)===L.id);if(C){let B=L.subitems||[];return Array.isArray(B)&&Array.isArray(C.subitems)&&(B.length?B=B.map(D=>{const R=C.subitems.find(V=>V.id===D.id);return R?{...D,selected:R.selected||D.selected}:D}):B=C.subitems),{...L,...C,subitems:B,selected:C.selected!==void 0?C.selected:L.selected,id:L.id}}return L}),n(E)},j=p.exports.useCallback(async()=>{a(!0);const x={pacienteId:t.id,vbmapp:s};try{await Fe("protocolo/vbmapp",x),h(!0),i({type:"success",title:"Sucesso!",message:"VB Mapp Cadastrado.",open:!0})}catch(E){console.error("Error saving form data",E),i({type:"failure",title:"Erro!",message:"Falha na conex\xE3o",open:!0})}finally{a(!1)}},[s,t.id,i]),U=p.exports.useCallback(x=>{y(x.index+1),N(x.index),T(x.index+1)},[T]),b=(x,E,A)=>{n(L=>{const C={...L};return C[x]=C[x].map(B=>{if(B.id===E)return{...B,selected:A};if(B.subitems){const D=B.subitems.map(R=>R.id===E?{...R,selected:A}:R);return{...B,subitems:D}}return B}),C})},M=x=>!!x.filter(A=>A.permiteSubitens).length,z=async(x,E,A)=>{const L=x.filter(_=>_.permiteSubitens),{estimuloDiscriminativo:C,estimuloReforcadorPositivo:B,procedimentoEnsinoId:D,resposta:R}=L[0],V=L.map((_,$)=>{const ee=`${E}-meta-${_.id}`,oe={...Pe,value:_.nome,..._,respostaSessao:_==null?void 0:_.respostaSessao,id:ee};if(_!=null&&_.subitems){const ae=_==null?void 0:_.subitems.map(Z=>{const te=Z!=null&&Z.selected?{selected:Z.selected}:{};return{...ze,id:Z.id,value:Z.nome,...te}});oe.subitems=ae}return oe});S(`/${ie.PROTOCOLO}`,{state:{edit:!0,item:{metas:V,paciente:t,estimuloDiscriminativo:C,estimuloReforcadorPositivo:B,procedimentoEnsinoId:D,programa:A,resposta:R},tipoProtocolo:Y.vbMapp}})},G=p.exports.useCallback((x,E)=>{const A=x.selected||null;return u("div",{children:[u("div",{className:"flex items-center gap-2",children:[e("div",{className:"w-8 h-8",children:e(qt,{value:A,onChange:L=>b(E,x.id,L)},x.id)}),x.nome]}),e("div",{className:"grid ml-8 mt-2",children:(x==null?void 0:x.subitems)&&x.subitems.map(L=>G(L,E))})]})},[]),q=p.exports.useCallback(()=>e("div",{className:"mt-8",children:Object.keys(s).length>0?e(bt,{children:Object.keys(s).map((x,E)=>e(yt,{className:"mb-2",tabIndex:E,header:u("div",{className:"flex items-center w-full gap-2",children:[e("span",{children:x.toLocaleUpperCase()}),M(s[x])&&e("i",{className:"pi pi-pencil",onClick:()=>z(s[x],E,x)})]}),children:e(St,{id:"vbmapp-page",value:s[x],selection:l,responsiveLayout:"scroll",dataKey:"id",tableStyle:{minWidth:"none"},children:e(wt,{body:A=>G(A,x),bodyStyle:{padding:".1rem"}})})},E))}):e(De,{})}),[s,G]),K=p.exports.useCallback(()=>g&&e("div",{className:"mt-auto",children:e(W,{text:"Gerar Relat\xF3rio",type:"primary",size:"full",icon:"pi pi-file-pdf",onClick:H,loading:o,typeButton:"button"})}),[g,H,o]),v=p.exports.useCallback(()=>e("div",{className:"mt-auto",children:e(W,{text:"Salvar",type:"primary",size:"full",onClick:j,loading:o})}),[j,o]);return p.exports.useEffect(()=>{T()},[t,T]),u("div",{className:"mt-8 space-y-6",children:[K(),u(rs,{activeIndex:f,onTabChange:U,children:[e(_e,{header:"N\xEDvel 1",children:q()}),e(_e,{header:"N\xEDvel 2",children:q()}),e(_e,{header:"N\xEDvel 3",children:q()})]}),v()]})}function Mo(t,o){var n;const a={...t.metas[0]};delete t.metas;const s=(n=o[0])!=null&&n.selected?{selected:o[0].selected}:{};return{...t,nome:a.value,id:a.id,programa:t.programa.nome,faixaEtaria:o[0].faixaEtaria,permiteSubitens:!0,...s,subitems:a.subitems.map((l,r)=>{var d,y;const i=(d=o[0].subitems[r])!=null&&d.selected?{selected:(y=o[0].subitems[r])==null?void 0:y.selected}:{};return{nome:l.value,id:l.id,...i}})}}function Bo(t,o,a){var N;const{procedimentoEnsinoId:s="",estimuloDiscriminativo:n="",estimuloReforcadorPositivo:l="",resposta:r="",pacienteId:i="",programaId:d=""}=t!=null?t:{},y=(N=a==null?void 0:a.programa)==null?void 0:N.find(g=>g.id===d),f=o.map(g=>({id:g.id,nome:g.value,procedimentoEnsinoId:s,estimuloDiscriminativo:n,estimuloReforcadorPositivo:l,resposta:r,pacienteId:i,permiteSubitens:!0,subitems:g.subitems.map((h,I)=>{var S,H;const w=(S=o[0].subitems[I])!=null&&S.selected?{selected:(H=o[0].subitems[I])==null?void 0:H.selected}:{};return{nome:h.value,id:h.id,...w}})}));return{programa:y.nome.toLowerCase(),metas:f}}const $o=({paciente:t,param:o})=>{const a={pacienteId:"",procedimentoEnsinoId:"",programaId:"",estimuloDiscriminativo:"",resposta:"",estimuloReforcadorPositivo:""},[s,n]=p.exports.useState(!1),[l,r]=p.exports.useState([]),[i,d]=p.exports.useState([]),y=Se(),f=xe(),{renderToast:N}=ce(),{hasPermition:g}=$e(),{state:h}=y,{handleSubmit:I,formState:{errors:w},setValue:S,control:H,reset:T,watch:F,unregister:m,resetField:j}=ke({defaultValues:a}),U=p.exports.useCallback(async(v=Y.pei)=>{const[x,E,A]=await Promise.all([ue(`programa/${v}`),ue("pei/procedimento-ensino"),ue("protocolo")]),L={programa:x,procedimentoEnsino:E,protocolo:A};r(L),b(L)},[r]),b=v=>{var x,E,A,L,C,B;if(Boolean((x=h==null?void 0:h.item)==null?void 0:x.programa)||(h==null?void 0:h.tipoProtocolo)===Y.vbMapp){const{paciente:D,programa:R,estimuloDiscriminativo:V,resposta:_,estimuloReforcadorPositivo:$,metas:ee,procedimentoEnsinoId:oe}=h.item,ae=typeof R!="object"?(E=v==null?void 0:v.programa)==null?void 0:E.find(te=>te.nome.toLowerCase()===R):R,Z=typeof oe!="object"?(A=v==null?void 0:v.procedimentoEnsino)==null?void 0:A.find(te=>te.id===oe):oe;S("pacienteId",D),S("programaId",ae),S("procedimentoEnsinoId",Z),S("estimuloDiscriminativo",V),S("resposta",_),S("estimuloReforcadorPositivo",$),d(ee),ee.forEach(te=>{var le;S(te.id,te.value),(le=te.subitems)==null||le.forEach(ge=>S(ge.id,ge.value))})}else if((h==null?void 0:h.tipoProtocolo)===Y.portage){const{paciente:D,metas:R}=o.item,V=(L=v.procedimentoEnsino)==null?void 0:L.find($=>$.id===R[0].procedimentoEnsino),_=(C=v==null?void 0:v.programa)==null?void 0:C.find($=>$.id===R[0].programa||$.nome===R[0].programa);d(R),S(R[0].id,R[0].value),S("pacienteId",D),S("programaId",_),S("procedimentoEnsinoId",V),S("estimuloDiscriminativo",R[0].estimuloDiscriminativo),S("resposta",R[0].resposta),S("estimuloReforcadorPositivo",R[0].estimuloReforcadorPositivo),(B=R[0].subitems)==null||B.forEach($=>S($.id,$.value))}};return{control:H,errors:w,handleSubmit:I,loading:s,metas:i,dropDownList:l,state:h,addMeta:()=>{const v=[...i],x=F("programaId");Pe.id=`${x.id}-meta-${v.length}`,v.push({...Pe}),d(v)},addSubitem:v=>{var B;const x=[...i],E=(B=x[v])!=null&&B.subitems?[...x[v].subitems]:[],A=E.reduce((D,R)=>{const V=R.id.match(/sub-item-(\d+)$/),_=V?parseInt(V[1],10):0;return Math.max(D,_)},-1),L=`${x[v].id}-sub-item-${A+1}`,C={...ze,id:L};E.push(C),x[v].subitems=E,d(x)},removeMeta:v=>{const x=[...i];S(x[v].id,void 0),x.splice(v,1),d(x)},renderDropdown:U,onSubmit:async v=>{var x,E;v.pacienteId=t,n(!0);try{const A={metas:[],programa:v.programaId},[L]=l.protocolo.filter(C=>C.id==h.tipoProtocolo);if(Object.values(v).some(C=>C==="")){n(!1),N({type:"failure",title:"Valores Vazios!",message:"Preencha a descri\xE7\xE3o da meta e/ou do item ou exclua-o",open:!0});return}if(Object.keys(v).forEach(C=>{if(C.includes("-meta-")&&!C.includes("-sub-item-")){const B=C.match(/\d+/),D=C.match(/(\d+)$/),R=Number(B[0]),V=Number(D[0]),_=[];Object.keys(v).forEach($=>{$.includes(`${R}-meta-${V}-sub-item-`)&&_.push({...ze,id:$,value:v[$]})}),A.metas.push({...Pe,id:C,subitems:_,value:v[C]})}else C.includes("Id")?A[C]=v[C].id:!C.includes("-meta-")&&!C.includes("-sub-item-")&&!C.includes("Id")&&(A[C]=v[C])}),Boolean((x=h==null?void 0:h.item)==null?void 0:x.id)&&(A.id=h.item.id),(h==null?void 0:h.tipoProtocolo)===Y.pei)Boolean((E=h==null?void 0:h.item)==null?void 0:E.id)?await Be("pei",A):await Fe("pei",A),f(`/${ie.PEI}`,{state:{pacienteId:v.pacienteId,protocoloId:L}});else if((h==null?void 0:h.tipoProtocolo)===Y.portage){const C=Mo(A,i);f(`/${ie.PROTOCOLO}`,{state:{pacienteId:v.pacienteId,protocoloId:L,metaEdit:C}})}else if((h==null?void 0:h.tipoProtocolo)===Y.vbMapp){const C=Bo(A,i,l);f(`/${ie.PROTOCOLO}`,{state:{pacienteId:v.pacienteId,protocoloId:L,metaEdit:C}})}T(),n(!1),d([]),N({type:"success",title:"Sucesso!",message:"PEI Cadastrado.",open:!0})}catch{n(!1),N({type:"failure",title:"Erro!",message:"Falha na conex\xE3o",open:!0})}},hasPermition:g,removeSubitemFromMeta:(v,x)=>{var L,C;const E=[...i],A=(C=(L=E[v])==null?void 0:L.subitems)==null?void 0:C[x];A!=null&&A.id&&(m(A.id,{keepValue:!1}),j(A.id)),E[v].subitems.splice(x,1),d(E)}}};function We({paciente:t,param:o}){const{control:a,errors:s,handleSubmit:n,loading:l,metas:r,dropDownList:i,state:d,addMeta:y,addSubitem:f,removeMeta:N,renderDropdown:g,onSubmit:h,hasPermition:I,removeSubitemFromMeta:w}=$o({paciente:t,param:o});return p.exports.useEffect(()=>{g(d==null?void 0:d.tipoProtocolo)},[g]),e("div",{className:"mt-8 space-y-6",children:u("div",{className:"h-[90vh] flex flex-col overflow-y-auto",children:[Hs.map(S=>e("div",{children:e(me,{labelText:S.labelText,id:S.id,type:S.type,customCol:S.customCol,control:a,options:S.type==="select"?i[S.name]:void 0,buttonAdd:S.buttonAdd})},S.id)),u("div",{className:"mt-8",children:[u("div",{className:"text-gray-400 font-inter flex justify-between m-2 leading-4",children:[e("span",{className:"font-bold",children:"METAS"}),!(d!=null&&d.tipoProtocolo)||(d==null?void 0:d.tipoProtocolo)===Y.pei?e(W,{text:"Add Meta",icon:"pi pi-plus",type:"primary",size:"sm",onClick:y,typeButton:"button"}):null]}),r.map((S,H)=>{var T;return u(is,{legend:`${S.labelText} ${H+1}`,className:"mb-2",toggleable:!0,children:[e("div",{className:"text-gray-400 font-inter flex justify-end",children:e(W,{text:"Add subitem",icon:"pi pi-plus",type:"primary",size:"sm",onClick:()=>f(H),typeButton:"button"})}),e(me,{labelText:"Descri\xE7\xE3o",id:S.id,type:"input-add",customCol:"col-span-6 sm:col-span-6",control:a,onClick:()=>N(H),disabled:(d==null?void 0:d.tipoProtocolo)!==Y.pei}),(T=S==null?void 0:S.subitems)==null?void 0:T.map((F,m)=>e(me,{labelText:`Item ${m+1}`,id:F.id,type:"input-add",customCol:"col-span-6 sm:col-span-6",control:a,onClick:()=>w(H,m)},F.id))]},S.id)})]}),e("div",{className:"mt-auto",children:e(W,{text:"Salvar",type:"primary",size:"full",typeButton:"button",onClick:n(h),loading:l})})]})})}const jo=Js,_o={};jo.forEach(t=>_o[t.id]="");const xt={id:"",nome:""};function Vo(){const{hasPermition:t}=$e();p.exports.useState(!1);const[o,a]=p.exports.useState([]),s=Se(),{state:n}=s,{handleSubmit:l,control:r,watch:i,setValue:d}=ke({defaultValues:{protocoloId:xt,pacienteId:xt}}),y=i("protocoloId"),f=i("pacienteId"),N=p.exports.useCallback(async()=>{const[g,h]=await Promise.all([ue("paciente"),ue("protocolo")]);if(a({paciente:g,protocolo:h}),n!=null&&n.tipoProtocolo){const I=h.filter(w=>w.id===n.tipoProtocolo)[0];d("protocoloId",I)}if(n!=null&&n.pacienteId&&d("pacienteId",n.pacienteId),n!=null&&n.item){const I=g.filter(w=>n.item.paciente.id===w.id)[0];d("pacienteId",I)}},[]);return p.exports.useEffect(()=>{N()},[]),u("form",{className:"mt-8",onSubmit:()=>{},children:[t("PEI_FILTRO_BOTAO_CADASTRAR")?e(me,{labelText:"Paciente",id:"pacienteId",type:"select",customCol:"col-span-6 sm:col-span-6",control:r,options:o.paciente},"pacienteId"):null,t("PEI_FILTRO_BOTAO_CADASTRAR")?e(me,{labelText:"Protocolo",id:"protocoloId",type:"select",customCol:"col-span-6 sm:col-span-6",control:r,options:o.protocolo,disabled:!(f!=null&&f.nome.length)||(n==null?void 0:n.tipoProtocolo)},"protocoloId"):null,!(n!=null&&n.edit)&&(y==null?void 0:y.id)&&y.id===Y.portage&&(f==null?void 0:f.id)&&e(Fo,{paciente:f}),!(n!=null&&n.edit)&&(y==null?void 0:y.id)&&y.id===Y.vbMapp&&(f==null?void 0:f.id)&&e(zo,{paciente:f}),!(n!=null&&n.edit)&&(y==null?void 0:y.id)&&y.id===Y.pei&&(f==null?void 0:f.id)&&e(We,{paciente:f}),(n==null?void 0:n.edit)&&e(We,{paciente:f,param:n})]})}function Ho(){const{renderToast:t}=ce(),o=xe(),a=Se(),{state:s}=a,[n,l]=p.exports.useState(!1),[r,i]=p.exports.useState([]),[d,y]=p.exports.useState(!1),[f,N]=p.exports.useState([]),[g,h]=p.exports.useState({}),[I,w]=p.exports.useState([]),[S,H]=p.exports.useState({}),[T,F]=p.exports.useState([]),[m,j]=p.exports.useState({}),[U,b]=p.exports.useState([]),[M,z]=p.exports.useState({}),G=D=>{let R=[];return D.forEach(V=>{R.push(V.key),V.children&&(R=f.concat(G(V.children)))}),R},q=p.exports.useCallback(async()=>{l(!0);try{const D=s.paciente,[R,V,_,$]=await Promise.all([ye("protocolo/meta",{pacienteId:D.id,protocoloId:Y.vbMapp}),ye("protocolo/meta",{pacienteId:D.id,protocoloId:Y.portage}),ye("pei",{paciente:D,protocoloId:Y.pei}),Ee(`pei/activity-session/${s.id}`)]),ee=_.data,oe=V.data,ae=R.data;y(!!ee.length||!!oe.length||!!ae.length);const Z=Boolean($==null?void 0:$.maintenance)&&typeof($==null?void 0:$.maintenance)=="object"?G($.maintenance):[];if(ee&&ee.length>0){const te=[];ee.map(le=>{const ge=[];le.metas.map(Ne=>{const Oe=Ne.subitems.reduce((c,k)=>(Z.includes(k.id)||c.push({key:k.id,label:k.value,data:k.id}),c),[]);Oe.length&&ge.push({key:Ne.id,label:Ne.value,data:Ne.id,children:Oe})}),ge.length&&te.push({key:le.id,label:le.programa.nome,data:le.id,children:ge})}),i(te)}if(oe&&oe.length>0&&(F(oe),j($==null?void 0:$.selectedPortageKeys)),ae&&ae.length>0&&(b(ae),z($==null?void 0:$.selectedVbMappKeys)),$.selectedKeys&&Object.values($.selectedKeys).length>0){const te=$.selectedKeys,le=Object.keys(te);h(te),N(le),$.maintenance&&w($.maintenance),Object.values($.selectedMaintenanceKeys).length&&H($.selectedMaintenanceKeys)}}catch{t({type:"failure",title:"401",message:"PEI n\xE3o encontrado!",open:!0})}finally{l(!1)}},[t]),K=async()=>{l(!0);try{const D=[];r.map((_,$)=>{const ee=[];_.children.map(oe=>{const ae=oe.children.filter(Z=>f.includes(Z.key));ae.length&&ee.push({...oe,children:ae})}),ee.length&&D.push({..._,children:ee})});const R=D.map(_=>_.key),V={calendarioId:s.id,peisIds:R,pacienteId:s.paciente.id,atividades:D,selectedKeys:g,maintenance:I,selectedMaintenanceKeys:S,selectedPortageKeys:m,portage:T,selectedVbMappKeys:M,vbmapp:U};d?(V.id=s.id,await Be("pei/activity-session",V)):await Fe("pei/activity-session",V),t({type:"success",title:"200",message:"Cadastrado com sucesso!",open:!0}),o(`/${ie.CALENDAR}`)}catch{t({type:"failure",title:"401",message:"Falha ao cadastrar!",open:!0})}l(!1)},v=p.exports.useMemo(()=>e(et,{start:s.data.start,end:s.data.end,statusEventos:s.statusEventos.nome,title:s.title,localidade:s.localidade.nome,isExterno:s.isExterno,km:s.km,modalidade:s.modalidade.nome,dataInicio:s.dataInicio,dataFim:s.dataFim,dataAtual:s.dataAtual}),[]),x=()=>!!r.length&&e("div",{className:"grid gap-2 mt-8",children:u("div",{children:[e("div",{className:"text-gray-400",children:" Selecione os programas para sess\xE3o"}),e(Le,{value:r,selectionMode:"checkbox",selectionKeys:g,onSelectionChange:async D=>{h(D.value);const R=await Object.keys(D.value);N(R)},className:"w-full md:w-30rem"})]})}),E=()=>!!I.length&&u("div",{className:"grid gap-2 my-8",children:[e("div",{className:"text-gray-400",children:" Manuten\xE7\xE3o "}),e(Le,{value:I,selectionMode:"checkbox",selectionKeys:S,onSelectionChange:async D=>{H(D.value)},className:"w-full md:w-30rem"})]}),A=()=>!!T.length&&u("div",{className:"grid gap-2 mt-8",children:[e("div",{className:"text-gray-400",children:" Portage "}),e(Le,{value:T,selectionMode:"checkbox",selectionKeys:m,onSelectionChange:async D=>{j(D.value)},className:"w-full md:w-30rem"})]}),L=()=>!!U.length&&u("div",{className:"grid gap-2 mt-8",children:[e("div",{className:"text-gray-400",children:" Vb Mapp "}),e(Le,{value:U,selectionMode:"checkbox",selectionKeys:M,onSelectionChange:async D=>{z(D.value)},className:"w-full md:w-30rem"})]}),C=()=>!U.length&&!T.length&&!I.length&&!r.length&&u("div",{className:"grid gap-4 justify-center",children:[e(De,{}),e(W,{text:"Cadastrar Protocolo",icon:"pi pi-book",type:"primary",color:"white",size:"sm",onClick:()=>o(`/${ie.PROTOCOLO}`,{state:{item:{paciente:s.paciente}}})})]}),B=()=>(!!U.length||!!T.length||!!I.length||!!r.length)&&e("div",{className:" mt-8",children:e(W,{text:"Salvar",type:"primary",size:"full",onClick:()=>K(),loading:n,typeButton:"button"})});return p.exports.useEffect(()=>{q()},[]),u("div",{className:"h-[90vh] flex flex-col overflow-y-auto",children:[v,x(),A(),L(),E(),C(),B()]})}var ie=(t=>(t.HOME="home",t.CRUD="cadastro",t.CALENDAR="agenda",t.SESSION="session",t.DTT="dtt",t.PEI="pei",t.PEICADASTRO="pei-cadastro",t.METAS="metas",t.PRIMEIRARESPOSTA="primeira-resposta",t.PROTOCOLO="protocolo-av",t))(ie||{});const Ut=[{path:"*",componentRoute:ut,icon:"",menu:!1},{path:"session",componentRoute:So,icon:"",menu:!1},{path:"dtt",componentRoute:Ge,icon:"",menu:!1},{path:"metas",componentRoute:Ho,icon:"",menu:!1},{path:"home",componentRoute:ut,icon:"pi pi-home",menu:!0},{path:"pei",componentRoute:Eo,icon:"pi pi-book",menu:!0},{path:"protocolo-av",componentRoute:Vo,icon:"pi pi-book",menu:!0},{path:"pei-cadastro",componentRoute:We,icon:"",menu:!1},{path:"agenda",componentRoute:uo,icon:"pi pi-calendar",menu:!0},{path:"primeira-resposta",componentRoute:Io,icon:"pi pi-check-square",menu:!0}],Jo=()=>u("div",{className:"min-h-full overflow-hidden bg-background h-screen w-full",children:[e(ro,{}),e("main",{className:"mt-14",children:e(Nt,{children:Ut.map((o,a)=>e(Je,{path:o.path,element:e(to,{children:e(o.componentRoute,{})})},a))})})]});function Yo(){const{signed:t}=je();return t?e(Et,{children:e(vs,{children:e(so,{children:e(Jo,{})})})}):e(eo,{})}function Go(){return e("div",{className:"App",children:e(ys,{children:e(ws,{children:e(Yo,{})})})})}Kt.createRoot(document.getElementById("root")).render(e(Wt.StrictMode,{children:e(Go,{})}));
