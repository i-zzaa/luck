import{R as w}from"./react.4862a0f1.js";var ee=e=>e.type==="checkbox",Q=e=>e instanceof Date,O=e=>e==null;const $e=e=>typeof e=="object";var E=e=>!O(e)&&!Array.isArray(e)&&$e(e)&&!Q(e),Ke=e=>E(e)&&e.target?ee(e.target)?e.target.checked:e.target.value:e,dr=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Ge=(e,t)=>e.has(dr(t)),re=e=>Array.isArray(e)?e.filter(Boolean):[],k=e=>e===void 0,c=(e,t,r)=>{if(!t||!E(e))return r;const n=re(t.split(/[,[\].]+?/)).reduce((l,o)=>O(l)?l:l[o],e);return k(n)||n===e?k(e[t])?r:e[t]:n};const ue={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},p={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},W={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},yr=w.createContext(null),Se=()=>w.useContext(yr);var ze=(e,t,r,n=!0)=>{const l={defaultValues:t._defaultValues};for(const o in e)Object.defineProperty(l,o,{get:()=>{const g=o;return t._proxyFormState[g]!==p.all&&(t._proxyFormState[g]=!n||p.all),r&&(r[g]=!0),e[g]}});return l},U=e=>E(e)&&!Object.keys(e).length,Je=(e,t,r)=>{const{name:n,...l}=e;return U(l)||Object.keys(l).length>=Object.keys(t).length||Object.keys(l).find(o=>t[o]===(!r||p.all))},le=e=>Array.isArray(e)?e:[e],Qe=(e,t,r)=>r&&t?e===t:!e||!t||e===t||le(e).some(n=>n&&(n.startsWith(t)||t.startsWith(n)));function De(e){const t=w.useRef(e);t.current=e,w.useEffect(()=>{const r=!e.disabled&&t.current.subject.subscribe({next:t.current.callback});return()=>{r&&r.unsubscribe()}},[e.disabled])}function hr(e){const t=Se(),{control:r=t.control,disabled:n,name:l,exact:o}=e||{},[g,h]=w.useState(r._formState),V=w.useRef(!0),F=w.useRef({isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),x=w.useRef(l);return x.current=l,De({disabled:n,callback:w.useCallback(v=>V.current&&Qe(x.current,v.name,o)&&Je(v,F.current)&&h({...r._formState,...v}),[r,o]),subject:r._subjects.state}),w.useEffect(()=>(V.current=!0,()=>{V.current=!1}),[]),ze(g,r,F.current,!1)}var N=e=>typeof e=="string",Xe=(e,t,r,n)=>{const l=Array.isArray(e);return N(e)?(n&&t.watch.add(e),c(r,e)):l?e.map(o=>(n&&t.watch.add(o),c(r,o))):(n&&(t.watchAll=!0),r)},oe=e=>typeof e=="function",Ee=e=>{for(const t in e)if(oe(e[t]))return!0;return!1};function gr(e){const t=Se(),{control:r=t.control,name:n,defaultValue:l,disabled:o,exact:g}=e||{},h=w.useRef(n);h.current=n,De({disabled:o,subject:r._subjects.watch,callback:w.useCallback(x=>{if(Qe(h.current,x.name,g)){const v=Xe(h.current,r._names,x.values||r._formValues);F(k(h.current)||E(v)&&!Ee(v)?{...v}:Array.isArray(v)?[...v]:k(v)?l:v)}},[r,g,l])});const[V,F]=w.useState(k(l)?r._getWatch(n):l);return w.useEffect(()=>r._removeUnmounted()),V}function vr(e){const t=Se(),{name:r,control:n=t.control,shouldUnregister:l}=e,o=Ge(n._names.array,r),g=gr({control:n,name:r,defaultValue:c(n._formValues,r,c(n._defaultValues,r,e.defaultValue)),exact:!0}),h=hr({control:n,name:r}),V=w.useRef(n.register(r,{...e.rules,value:g}));return w.useEffect(()=>{const F=(x,v)=>{const _=c(n._fields,x);_&&(_._f.mount=v)};return F(r,!0),()=>{const x=n._options.shouldUnregister||l;(o?x&&!n._stateFlags.action:x)?n.unregister(r):F(r,!1)}},[r,n,o,l]),{field:{name:r,value:g,onChange:w.useCallback(F=>V.current.onChange({target:{value:Ke(F),name:r},type:ue.CHANGE}),[r]),onBlur:w.useCallback(()=>V.current.onBlur({target:{value:c(n._formValues,r),name:r},type:ue.BLUR}),[r,n]),ref:F=>{const x=c(n._fields,r);x&&F&&(x._f.ref={focus:()=>F.focus(),select:()=>F.select(),setCustomValidity:v=>F.setCustomValidity(v),reportValidity:()=>F.reportValidity()})}},formState:h,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!c(h.errors,r)},isDirty:{enumerable:!0,get:()=>!!c(h.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!c(h.touchedFields,r)},error:{enumerable:!0,get:()=>c(h.errors,r)}})}}const Lr=e=>e.render(vr(e));var _r=(e,t,r,n,l)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:l||!0}}:{},Ce=e=>/^\w*$/.test(e),Ye=e=>re(e.replace(/["|']|\]/g,"").split(/\.|\[/));function m(e,t,r){let n=-1;const l=Ce(t)?[t]:Ye(t),o=l.length,g=o-1;for(;++n<o;){const h=l[n];let V=r;if(n!==g){const F=e[h];V=E(F)||Array.isArray(F)?F:isNaN(+l[n+1])?{}:[]}e[h]=V,e=e[h]}return e}const me=(e,t,r)=>{for(const n of r||Object.keys(e)){const l=c(e,n);if(l){const{_f:o,...g}=l;if(o&&t(o.name)){if(o.ref.focus){o.ref.focus();break}else if(o.refs&&o.refs[0].focus){o.refs[0].focus();break}}else E(g)&&me(g,t)}}};var Pe=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length)))),br=(e,t,r)=>{const n=re(c(e,r));return m(n,"root",t[r]),m(e,r,n),e},ce=e=>typeof e=="boolean",Re=e=>e.type==="file",ae=e=>N(e)||w.isValidElement(e),Oe=e=>e.type==="radio",fe=e=>e instanceof RegExp;const pe={value:!1,isValid:!1},Ne={value:!0,isValid:!0};var Ze=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!k(e[0].attributes.value)?k(e[0].value)||e[0].value===""?Ne:{value:e[0].value,isValid:!0}:Ne:pe}return pe};const Ie={isValid:!1,value:null};var er=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,Ie):Ie;function qe(e,t,r="validate"){if(ae(e)||Array.isArray(e)&&e.every(ae)||ce(e)&&!e)return{type:r,message:ae(e)?e:"",ref:t}}var J=e=>E(e)&&!fe(e)?e:{value:e,message:""},We=async(e,t,r,n,l)=>{const{ref:o,refs:g,required:h,maxLength:V,minLength:F,min:x,max:v,pattern:_,validate:H,name:M,valueAsNumber:te,mount:he,disabled:j}=e._f;if(!he||j)return{};const I=g?g[0]:o,q=b=>{n&&I.reportValidity&&(I.setCustomValidity(ce(b)?"":b||" "),I.reportValidity())},D={},Y=Oe(o),se=ee(o),$=Y||se,z=(te||Re(o))&&!o.value||t===""||Array.isArray(t)&&!t.length,B=_r.bind(null,M,r,D),ie=(b,A,C,L=W.maxLength,P=W.minLength)=>{const K=b?A:C;D[M]={type:b?L:P,message:K,ref:o,...B(b?L:P,K)}};if(l?!Array.isArray(t)||!t.length:h&&(!$&&(z||O(t))||ce(t)&&!t||se&&!Ze(g).isValid||Y&&!er(g).isValid)){const{value:b,message:A}=ae(h)?{value:!!h,message:h}:J(h);if(b&&(D[M]={type:W.required,message:A,ref:I,...B(W.required,A)},!r))return q(A),D}if(!z&&(!O(x)||!O(v))){let b,A;const C=J(v),L=J(x);if(!O(t)&&!isNaN(t)){const P=o.valueAsNumber||t&&+t;O(C.value)||(b=P>C.value),O(L.value)||(A=P<L.value)}else{const P=o.valueAsDate||new Date(t);N(C.value)&&(b=P>new Date(C.value)),N(L.value)&&(A=P<new Date(L.value))}if((b||A)&&(ie(!!b,C.message,L.message,W.max,W.min),!r))return q(D[M].message),D}if((V||F)&&!z&&(N(t)||l&&Array.isArray(t))){const b=J(V),A=J(F),C=!O(b.value)&&t.length>b.value,L=!O(A.value)&&t.length<A.value;if((C||L)&&(ie(C,b.message,A.message),!r))return q(D[M].message),D}if(_&&!z&&N(t)){const{value:b,message:A}=J(_);if(fe(b)&&!t.match(b)&&(D[M]={type:W.pattern,message:A,ref:o,...B(W.pattern,A)},!r))return q(A),D}if(H){if(oe(H)){const b=await H(t),A=qe(b,I);if(A&&(D[M]={...A,...B(W.validate,A.message)},!r))return q(A.message),D}else if(E(H)){let b={};for(const A in H){if(!U(b)&&!r)break;const C=qe(await H[A](t),I,A);C&&(b={...C,...B(A,C.message)},q(C.message),r&&(D[M]=b))}if(!U(b)&&(D[M]={ref:I,...b},!r))return D}}return q(!0),D},Fr=e=>{const t=e.constructor&&e.constructor.prototype;return E(t)&&t.hasOwnProperty("isPrototypeOf")},we=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function G(e){let t;const r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(we&&(e instanceof Blob||e instanceof FileList))&&(r||E(e)))if(t=r?[]:{},!Array.isArray(e)&&!Fr(e))t=e;else for(const n in e)t[n]=G(e[n]);else return e;return t}var He=e=>({isOnSubmit:!e||e===p.onSubmit,isOnBlur:e===p.onBlur,isOnChange:e===p.onChange,isOnAll:e===p.all,isOnTouch:e===p.onTouched});function Ar(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=k(e)?n++:e[t[n++]];return e}function Vr(e){for(const t in e)if(!k(e[t]))return!1;return!0}function R(e,t){const r=Ce(t)?[t]:Ye(t),n=r.length==1?e:Ar(e,r),l=r[r.length-1];let o;n&&delete n[l];for(let g=0;g<r.slice(0,-1).length;g++){let h=-1,V;const F=r.slice(0,-(g+1)),x=F.length-1;for(g>0&&(o=e);++h<F.length;){const v=F[h];V=V?V[v]:e[v],x===h&&(E(V)&&U(V)||Array.isArray(V)&&Vr(V))&&(o?delete o[v]:delete e[v]),o=V}}return e}function Fe(){let e=[];return{get observers(){return e},next:l=>{for(const o of e)o.next(l)},subscribe:l=>(e.push(l),{unsubscribe:()=>{e=e.filter(o=>o!==l)}}),unsubscribe:()=>{e=[]}}}var de=e=>O(e)||!$e(e);function X(e,t){if(de(e)||de(t))return e===t;if(Q(e)&&Q(t))return e.getTime()===t.getTime();const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const l of r){const o=e[l];if(!n.includes(l))return!1;if(l!=="ref"){const g=t[l];if(Q(o)&&Q(g)||E(o)&&E(g)||Array.isArray(o)&&Array.isArray(g)?!X(o,g):o!==g)return!1}}return!0}var ke=e=>{const t=e?e.ownerDocument:0,r=t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement;return e instanceof r},rr=e=>e.type==="select-multiple",xr=e=>Oe(e)||ee(e),Ae=e=>ke(e)&&e.isConnected;function ye(e,t={}){const r=Array.isArray(e);if(E(e)||r)for(const n in e)Array.isArray(e[n])||E(e[n])&&!Ee(e[n])?(t[n]=Array.isArray(e[n])?[]:{},ye(e[n],t[n])):O(e[n])||(t[n]=!0);return t}function tr(e,t,r){const n=Array.isArray(e);if(E(e)||n)for(const l in e)Array.isArray(e[l])||E(e[l])&&!Ee(e[l])?k(t)||de(r[l])?r[l]=Array.isArray(e[l])?ye(e[l],[]):{...ye(e[l])}:tr(e[l],O(t)?{}:t[l],r[l]):r[l]=!X(e[l],t[l]);return r}var Ve=(e,t)=>tr(e,t,ye(t)),sr=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>k(e)?e:t?e===""?NaN:e&&+e:r&&N(e)?new Date(e):n?n(e):e;function xe(e){const t=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):t.disabled))return Re(t)?t.files:Oe(t)?er(e.refs).value:rr(t)?[...t.selectedOptions].map(({value:r})=>r):ee(t)?Ze(e.refs).value:sr(k(t.value)?e.ref.value:t.value,e)}var mr=(e,t,r,n)=>{const l={};for(const o of e){const g=c(t,o);g&&m(l,o,g._f)}return{criteriaMode:r,names:[...e],fields:l,shouldUseNativeValidation:n}},Z=e=>k(e)?void 0:fe(e)?e.source:E(e)?fe(e.value)?e.value.source:e.value:e,wr=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function je(e,t,r){const n=c(e,r);if(n||Ce(r))return{error:n,name:r};const l=r.split(".");for(;l.length;){const o=l.join("."),g=c(t,o),h=c(e,o);if(g&&!Array.isArray(g)&&r!==o)return{name:r};if(h&&h.type)return{name:o,error:h};l.pop()}return{name:r}}var kr=(e,t,r,n,l)=>l.isOnAll?!1:!r&&l.isOnTouch?!(t||e):(r?n.isOnBlur:l.isOnBlur)?!e:(r?n.isOnChange:l.isOnChange)?e:!0,Sr=(e,t)=>!re(c(e,t)).length&&R(e,t);const Dr={mode:p.onSubmit,reValidateMode:p.onChange,shouldFocusError:!0};function Er(e={}){let t={...Dr,...e},r={submitCount:0,isDirty:!1,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},n={},l=G(t.defaultValues)||{},o=t.shouldUnregister?{}:G(l),g={action:!1,mount:!1,watch:!1},h={mount:new Set,unMount:new Set,array:new Set,watch:new Set},V,F=0,x={};const v={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},_={watch:Fe(),array:Fe(),state:Fe()},H=He(t.mode),M=He(t.reValidateMode),te=t.criteriaMode===p.all,he=s=>i=>{clearTimeout(F),F=window.setTimeout(s,i)},j=async s=>{let i=!1;return v.isValid&&(i=t.resolver?U((await $()).errors):await B(n,!0),!s&&i!==r.isValid&&(r.isValid=i,_.state.next({isValid:i}))),i},I=(s,i=[],a,f,d=!0,u=!0)=>{if(f&&a){if(g.action=!0,u&&Array.isArray(c(n,s))){const y=a(c(n,s),f.argA,f.argB);d&&m(n,s,y)}if(v.errors&&u&&Array.isArray(c(r.errors,s))){const y=a(c(r.errors,s),f.argA,f.argB);d&&m(r.errors,s,y),Sr(r.errors,s)}if(v.touchedFields&&u&&Array.isArray(c(r.touchedFields,s))){const y=a(c(r.touchedFields,s),f.argA,f.argB);d&&m(r.touchedFields,s,y)}v.dirtyFields&&(r.dirtyFields=Ve(l,o)),_.state.next({isDirty:b(s,i),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else m(o,s,i)},q=(s,i)=>{m(r.errors,s,i),_.state.next({errors:r.errors})},D=(s,i,a,f)=>{const d=c(n,s);if(d){const u=c(o,s,k(a)?c(l,s):a);k(u)||f&&f.defaultChecked||i?m(o,s,i?u:xe(d._f)):L(s,u),g.mount&&j()}},Y=(s,i,a,f,d)=>{let u=!1;const y={name:s},S=c(r.touchedFields,s);if(v.isDirty){const T=r.isDirty;r.isDirty=y.isDirty=b(),u=T!==y.isDirty}if(v.dirtyFields&&(!a||f)){const T=c(r.dirtyFields,s);X(c(l,s),i)?R(r.dirtyFields,s):m(r.dirtyFields,s,!0),y.dirtyFields=r.dirtyFields,u=u||T!==c(r.dirtyFields,s)}return a&&!S&&(m(r.touchedFields,s,a),y.touchedFields=r.touchedFields,u=u||v.touchedFields&&S!==a),u&&d&&_.state.next(y),u?y:{}},se=async(s,i,a,f)=>{const d=c(r.errors,s),u=v.isValid&&r.isValid!==i;if(e.delayError&&a?(V=he(()=>q(s,a)),V(e.delayError)):(clearTimeout(F),V=null,a?m(r.errors,s,a):R(r.errors,s)),(a?!X(d,a):d)||!U(f)||u){const y={...f,...u?{isValid:i}:{},errors:r.errors,name:s};r={...r,...y},_.state.next(y)}x[s]--,v.isValidating&&!Object.values(x).some(y=>y)&&(_.state.next({isValidating:!1}),x={})},$=async s=>t.resolver?await t.resolver({...o},t.context,mr(s||h.mount,n,t.criteriaMode,t.shouldUseNativeValidation)):{},z=async s=>{const{errors:i}=await $();if(s)for(const a of s){const f=c(i,a);f?m(r.errors,a,f):R(r.errors,a)}else r.errors=i;return i},B=async(s,i,a={valid:!0})=>{for(const f in s){const d=s[f];if(d){const{_f:u,...y}=d;if(u){const S=h.array.has(u.name),T=await We(d,c(o,u.name),te,t.shouldUseNativeValidation,S);if(T[u.name]&&(a.valid=!1,i))break;!i&&(c(T,u.name)?S?br(r.errors,T,u.name):m(r.errors,u.name,T[u.name]):R(r.errors,u.name))}y&&await B(y,i,a)}}return a.valid},ie=()=>{for(const s of h.unMount){const i=c(n,s);i&&(i._f.refs?i._f.refs.every(a=>!Ae(a)):!Ae(i._f.ref))&&ve(s)}h.unMount=new Set},b=(s,i)=>(s&&i&&m(o,s,i),!X(Te(),l)),A=(s,i,a)=>{const f={...g.mount?o:k(i)?l:N(s)?{[s]:i}:i};return Xe(s,h,f,a)},C=s=>re(c(g.mount?o:l,s,e.shouldUnregister?c(l,s,[]):[])),L=(s,i,a={})=>{const f=c(n,s);let d=i;if(f){const u=f._f;u&&(!u.disabled&&m(o,s,sr(i,u)),d=we&&ke(u.ref)&&O(i)?"":i,rr(u.ref)?[...u.ref.options].forEach(y=>y.selected=d.includes(y.value)):u.refs?ee(u.ref)?u.refs.length>1?u.refs.forEach(y=>(!y.defaultChecked||!y.disabled)&&(y.checked=Array.isArray(d)?!!d.find(S=>S===y.value):d===y.value)):u.refs[0]&&(u.refs[0].checked=!!d):u.refs.forEach(y=>y.checked=y.value===d):Re(u.ref)?u.ref.value="":(u.ref.value=d,u.ref.type||_.watch.next({name:s})))}(a.shouldDirty||a.shouldTouch)&&Y(s,d,a.shouldTouch,a.shouldDirty,!0),a.shouldValidate&&ge(s)},P=(s,i,a)=>{for(const f in i){const d=i[f],u=`${s}.${f}`,y=c(n,u);(h.array.has(s)||!de(d)||y&&!y._f)&&!Q(d)?P(u,d,a):L(u,d,a)}},K=(s,i,a={})=>{const f=c(n,s),d=h.array.has(s),u=G(i);m(o,s,u),d?(_.array.next({name:s,values:o}),(v.isDirty||v.dirtyFields)&&a.shouldDirty&&(r.dirtyFields=Ve(l,o),_.state.next({name:s,dirtyFields:r.dirtyFields,isDirty:b(s,u)}))):f&&!f._f&&!O(u)?P(s,u,a):L(s,u,a),Pe(s,h)&&_.state.next({}),_.watch.next({name:s})},Le=async s=>{const i=s.target;let a=i.name;const f=c(n,a);if(f){let d,u;const y=i.type?xe(f._f):Ke(s),S=s.type===ue.BLUR||s.type===ue.FOCUS_OUT,T=!wr(f._f)&&!t.resolver&&!c(r.errors,a)&&!f._f.deps||kr(S,c(r.touchedFields,a),r.isSubmitted,M,H),ne=Pe(a,h,S);m(o,a,y),S?(f._f.onBlur&&f._f.onBlur(s),V&&V(0)):f._f.onChange&&f._f.onChange(s);const be=Y(a,y,S,!1),cr=!U(be)||ne;if(!S&&_.watch.next({name:a,type:s.type}),T)return cr&&_.state.next({name:a,...ne?{}:be});if(!S&&ne&&_.state.next({}),x[a]=(x[a],1),_.state.next({isValidating:!0}),t.resolver){const{errors:Me}=await $([a]),fr=je(r.errors,n,a),Be=je(Me,n,fr.name||a);d=Be.error,a=Be.name,u=U(Me)}else d=(await We(f,c(o,a),te,t.shouldUseNativeValidation))[a],u=await j(!0);f._f.deps&&ge(f._f.deps),se(a,u,d,be)}},ge=async(s,i={})=>{let a,f;const d=le(s);if(_.state.next({isValidating:!0}),t.resolver){const u=await z(k(s)?s:d);a=U(u),f=s?!d.some(y=>c(u,y)):a}else s?(f=(await Promise.all(d.map(async u=>{const y=c(n,u);return await B(y&&y._f?{[u]:y}:y)}))).every(Boolean),!(!f&&!r.isValid)&&j()):f=a=await B(n);return _.state.next({...!N(s)||v.isValid&&a!==r.isValid?{}:{name:s},...t.resolver?{isValid:a}:{},errors:r.errors,isValidating:!1}),i.shouldFocus&&!f&&me(n,u=>c(r.errors,u),s?d:h.mount),f},Te=s=>{const i={...l,...g.mount?o:{}};return k(s)?i:N(s)?c(i,s):s.map(a=>c(i,a))},Ue=(s,i)=>({invalid:!!c((i||r).errors,s),isDirty:!!c((i||r).dirtyFields,s),isTouched:!!c((i||r).touchedFields,s),error:c((i||r).errors,s)}),ir=s=>{s?le(s).forEach(i=>R(r.errors,i)):r.errors={},_.state.next({errors:r.errors})},nr=(s,i,a)=>{const f=(c(n,s,{_f:{}})._f||{}).ref;m(r.errors,s,{...i,ref:f}),_.state.next({name:s,errors:r.errors,isValid:!1}),a&&a.shouldFocus&&f&&f.focus&&f.focus()},lr=(s,i)=>oe(s)?_.watch.subscribe({next:a=>s(A(void 0,i),a)}):A(s,i,!0),ve=(s,i={})=>{for(const a of s?le(s):h.mount)h.mount.delete(a),h.array.delete(a),c(n,a)&&(i.keepValue||(R(n,a),R(o,a)),!i.keepError&&R(r.errors,a),!i.keepDirty&&R(r.dirtyFields,a),!i.keepTouched&&R(r.touchedFields,a),!t.shouldUnregister&&!i.keepDefaultValue&&R(l,a));_.watch.next({}),_.state.next({...r,...i.keepDirty?{isDirty:b()}:{}}),!i.keepIsValid&&j()},_e=(s,i={})=>{let a=c(n,s);const f=ce(i.disabled);return m(n,s,{...a||{},_f:{...a&&a._f?a._f:{ref:{name:s}},name:s,mount:!0,...i}}),h.mount.add(s),a?f&&m(o,s,i.disabled?void 0:c(o,s,xe(a._f))):D(s,!0,i.value),{...f?{disabled:i.disabled}:{},...t.shouldUseNativeValidation?{required:!!i.required,min:Z(i.min),max:Z(i.max),minLength:Z(i.minLength),maxLength:Z(i.maxLength),pattern:Z(i.pattern)}:{},name:s,onChange:Le,onBlur:Le,ref:d=>{if(d){_e(s,i),a=c(n,s);const u=k(d.value)&&d.querySelectorAll&&d.querySelectorAll("input,select,textarea")[0]||d,y=xr(u),S=a._f.refs||[];if(y?S.find(T=>T===u):u===a._f.ref)return;m(n,s,{_f:{...a._f,...y?{refs:[...S.filter(Ae),u,...Array.isArray(c(l,s))?[{}]:[]],ref:{type:u.type,name:s}}:{ref:u}}}),D(s,!1,void 0,u)}else a=c(n,s,{}),a._f&&(a._f.mount=!1),(t.shouldUnregister||i.shouldUnregister)&&!(Ge(h.array,s)&&g.action)&&h.unMount.add(s)}}},ar=(s,i)=>async a=>{a&&(a.preventDefault&&a.preventDefault(),a.persist&&a.persist());let f=!0,d=G(o);_.state.next({isSubmitting:!0});try{if(t.resolver){const{errors:u,values:y}=await $();r.errors=u,d=y}else await B(n);U(r.errors)?(_.state.next({errors:{},isSubmitting:!0}),await s(d,a)):(i&&await i({...r.errors},a),t.shouldFocusError&&me(n,u=>c(r.errors,u),h.mount))}catch(u){throw f=!1,u}finally{r.isSubmitted=!0,_.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:U(r.errors)&&f,submitCount:r.submitCount+1,errors:r.errors})}},ur=(s,i={})=>{c(n,s)&&(k(i.defaultValue)?K(s,c(l,s)):(K(s,i.defaultValue),m(l,s,i.defaultValue)),i.keepTouched||R(r.touchedFields,s),i.keepDirty||(R(r.dirtyFields,s),r.isDirty=i.defaultValue?b(s,c(l,s)):b()),i.keepError||(R(r.errors,s),v.isValid&&j()),_.state.next({...r}))},or=(s,i={})=>{const a=s||l,f=G(a),d=s&&!U(s)?f:l;if(i.keepDefaultValues||(l=a),!i.keepValues){if(i.keepDirtyValues)for(const u of h.mount)c(r.dirtyFields,u)?m(d,u,c(o,u)):K(u,c(d,u));else{if(we&&k(s))for(const u of h.mount){const y=c(n,u);if(y&&y._f){const S=Array.isArray(y._f.refs)?y._f.refs[0]:y._f.ref;try{if(ke(S)){S.closest("form").reset();break}}catch{}}}n={}}o=e.shouldUnregister?i.keepDefaultValues?G(l):{}:f,_.array.next({values:d}),_.watch.next({values:d})}h={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},g.mount=!v.isValid||!!i.keepIsValid,g.watch=!!e.shouldUnregister,_.state.next({submitCount:i.keepSubmitCount?r.submitCount:0,isDirty:i.keepDirty||i.keepDirtyValues?r.isDirty:!!(i.keepDefaultValues&&!X(s,l)),isSubmitted:i.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:i.keepDirty||i.keepDirtyValues?r.dirtyFields:i.keepDefaultValues&&s?Ve(l,s):{},touchedFields:i.keepTouched?r.touchedFields:{},errors:i.keepErrors?r.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})};return{control:{register:_e,unregister:ve,getFieldState:Ue,_executeSchema:$,_getWatch:A,_getDirty:b,_updateValid:j,_removeUnmounted:ie,_updateFieldArray:I,_getFieldArray:C,_subjects:_,_proxyFormState:v,get _fields(){return n},get _formValues(){return o},get _stateFlags(){return g},set _stateFlags(s){g=s},get _defaultValues(){return l},get _names(){return h},set _names(s){h=s},get _formState(){return r},set _formState(s){r=s},get _options(){return t},set _options(s){t={...t,...s}}},trigger:ge,register:_e,handleSubmit:ar,watch:lr,setValue:K,getValues:Te,reset:(s,i)=>or(oe(s)?s(o):s,i),resetField:ur,clearErrors:ir,unregister:ve,setError:nr,setFocus:(s,i={})=>{const a=c(n,s),f=a&&a._f;if(f){const d=f.refs?f.refs[0]:f.ref;d.focus&&(d.focus(),i.shouldSelect&&d.select())}},getFieldState:Ue}}function Tr(e={}){const t=w.useRef(),[r,n]=w.useState({isDirty:!1,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:e.defaultValues});t.current||(t.current={...Er(e),formState:r});const l=t.current.control;return l._options=e,De({subject:l._subjects.state,callback:w.useCallback(o=>{Je(o,l._proxyFormState,!0)&&(l._formState={...l._formState,...o},n({...l._formState}))},[l])}),w.useEffect(()=>{l._stateFlags.mount||(l._proxyFormState.isValid&&l._updateValid(),l._stateFlags.mount=!0),l._stateFlags.watch&&(l._stateFlags.watch=!1,l._subjects.state.next({})),l._removeUnmounted()}),t.current.formState=ze(r,l),t.current}export{Lr as C,Tr as u};
